function getShaderText(t){return document.getElementById(t).innerHTML}function getProgram(t,e,i){var s=t.createProgram();return t.attachShader(s,e),t.attachShader(s,i),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)?(t.useProgram(s),s):void console.log(t.getProgramInfoLog(s))}function getProgramByShaderSource(t,e,i){var s=getShader(t,!0,e),r=getShader(t,!1,i);return getProgram(t,s,r)}function getShader(t,e,i){var s=e?t.createShader(t.VERTEX_SHADER):t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(s,i),t.compileShader(s),t.getShaderParameter(s,t.COMPILE_STATUS)?s:void console.log(t.getShaderInfoLog(s))}function getVBO(t,e){var i=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),i}function bindAttribute(t,e,i,s){t.bindBuffer(t.ARRAY_BUFFER,s),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,i,t.FLOAT,!1,0,0)}function getTextureByImgObject(t,e,i){t.activeTexture(t.TEXTURE0+i);var s=t.createTexture();return t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),s}function create_ibo(t,e){var i=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),i}function uniformController(t,e,i){var s=e,r=i;for(var n in i){var a=i[n];a.location=t.getUniformLocation(s,n)}return{bindUniform:function(e,i){var s=r[e],n=s.type;"Matrix3fv"==n||"Matrix4fv"==n?t["uniform"+n](s.location,!1,i):t["uniform"+n](s.location,i)}}}function clone(t){if("object"!=typeof t||null==t)return t;var e={};for(var i in t)e[i]=clone(t[i]);return e}function getUid(){return Date.now()%1e4+Math.random()}function getIBO(t,e){var i=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),i}function resizeGlTextureImg(t,e){void 0===e&&(e=null);var i=t.width,s=t.height,r=Math.log2||function(t){return Math.log(t)/Math.log(2)};if(!e){if(i==s&&r(i)%1==0)return t;var n=document.createElement("canvas");n.width=n.height=e?e:Math.pow(2,Math.ceil(r(Math.max(i,s))));var a=n.getContext("2d");return a.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),n}}function supportWebGL(){return!!document.createElement("canvas").getContext("webgl")}var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Moe2;!function(t){function e(t,e){var i=document.createElement(t);return i.className=e,i}var i=function(){function t(){this.listeners={}}return t.prototype.dispatchEvent=function(t,e){if(this.listeners[t])for(var i in this.listeners[t]){var s=this.listeners[t][i];if(s.listener(e,this),s.useCapture)return}},t.prototype.addEventListener=function(t,e,i){void 0===i&&(i=!1),this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({listener:e,useCapture:i})},t.prototype.removeAllEventListenersOfEvent=function(t){this.listeners[t]=[]},t}();t.EventBase=i,function(t){t[t.play=0]="play",t[t.pause=1]="pause",t[t.ready=2]="ready",t[t.error=3]="error",t[t.timeupdate=4]="timeupdate",t[t.resize=5]="resize",t[t.enterfullscreen=6]="enterfullscreen",t[t.exitfullscreen=7]="exitfullscreen",t[t.seeking=8]="seeking",t[t.seeked=9]="seeked",t[t.buffer=10]="buffer"}(t.PlayerEvent||(t.PlayerEvent={}));var s=t.PlayerEvent,r=function(e){function i(i,r,a){void 0===r&&(r=null),void 0===a&&(a=null),e.call(this),this.seekingTime=0,this.lastUpdateTime=-1,this.buffering=!1,t.PlayerEventBus=new t.EventBase,this.containerEl=i,i.innerHTML="<video webkit-playsinline></video>",this.videoEl=this.containerEl.querySelector("video"),this.controlLayer=new n.ControlLayer(this,r),this.danmakuManager=new t.Danmaku.DanmakuManager(a),this.danmakuManager.init(this),this.containerEl.appendChild(this.danmakuManager.canvas),this.danmakuManager.resize(),this.containerEl.appendChild(this.controlLayer.element),this.containerEl.appendChild(this.videoEl),this.touchMode=!!document.createTouch,this.videoEl.addEventListener("play",function(){this.dispatchEvent(s.ready)}.bind(this)),this.videoEl.load(),this.videoEl.addEventListener("playing",function(){this.dispatchEvent(s.play),this.isPlaying=!0}.bind(this)),this.videoEl.addEventListener("pause",function(){this.dispatchEvent(s.pause),this.isPlaying=!1}.bind(this)),this.videoEl.addEventListener("error",function(){this.dispatchEvent(s.error)}.bind(this)),this.videoEl.addEventListener("seeked",function(){this.dispatchEvent(s.seeked)}.bind(this)),this.videoEl.addEventListener("timeupdate",function(){this.dispatchEvent(s.timeupdate),localStorage.setItem("lasttime:"+a,this.videoEl.currentTime)}.bind(this)),this.videoEl.addEventListener("loadedmetadata",function(){this.duration=this.videoEl.duration,this.dispatchEvent(s.resize);var t=localStorage.getItem("lasttime:"+a);t&&(this.videoEl.currentTime=t)}.bind(this)),window.addEventListener("resize",function(){this.dispatchEvent(s.resize)}.bind(this)),window.addEventListener("keypress",function(t){"TEXTAREA"!=t.target.nodeName&&"INPUT"!=t.target.nodeName&&(t.preventDefault(),32==t.keyCode&&(this.isPlaying?this.pause():this.play()))}.bind(this)),window.addEventListener("keyup",function(t){"TEXTAREA"!=t.target.nodeName&&"INPUT"!=t.target.nodeName&&(t.preventDefault(),37==t.keyCode?this.seek(Math.max(0,this.currentTime-15)):39==t.keyCode&&this.seek(Math.min(this.duration,this.currentTime+15)))}.bind(this)),document.addEventListener("webkitfullscreenchange",function(){document.webkitIsFullScreen===!0?(this.fullscreenState=!0,this.containerEl.classList.add("fullscreen"),setTimeout(function(){this.videoEl.style.marginTop=(window.innerHeight-this.videoEl.offsetHeight)/2+"px",this.danmakuManager.resize()}.bind(this),300)):(this.fullscreenState=!1,this.containerEl.classList.remove("fullscreen"),this.videoEl.style.marginTop=null,this.danmakuManager.resize())}.bind(this)),this.containerEl.addEventListener("contextmenu",function(t){t.preventDefault(),this.contextMenu&&(this.contextMenu.dispose(),this.contextMenu=null),this.contextMenu=new n.ContextMenu,this.containerEl.appendChild(this.contextMenu.element),this.contextMenu.element.style.left=t.offsetX+"px",this.contextMenu.element.style.top=t.offsetY+"px",this.contextMenu.addEventListener("CLICK",function(t){switch(t){case"pause":this.pause();break;case"togleGPU":"true"==localStorage.getItem("useGPU")?localStorage.setItem("useGPU","false"):localStorage.setItem("useGPU","true"),location.reload()}this.contextMenu.dispose(),this.contextMenu=null}.bind(this))}.bind(this)),window.addEventListener("click",function(t){this.contextMenu&&0==t.button&&(this.contextMenu.dispose(),this.contextMenu=null)}.bind(this),!1),setInterval(this.checkBufferState.bind(this),250)}return __extends(i,e),Object.defineProperty(i.prototype,"currentTime",{get:function(){return this.videoEl.currentTime},set:function(t){this.seeked(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"volume",{get:function(){return this.videoEl.volume},set:function(t){this.videoEl.volume=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isPlaying",{get:function(){return!this.videoEl.paused},enumerable:!0,configurable:!0}),i.prototype.checkBufferState=function(){this.videoEl.currentTime!=this.lastUpdateTime||this.buffering?this.videoEl.currentTime!=this.lastUpdateTime&&(this.buffering||this.isPlaying)&&(this.buffering=!1,this.dispatchEvent(s.play)):(this.buffering=!0,this.dispatchEvent(s.buffer)),this.lastUpdateTime=this.videoEl.currentTime},i.prototype.initVideo=function(t){this.videoEl.src=t},i.prototype.loadDanmaku=function(t,e){void 0===e&&(e="bilibili"),this.danmakuManager.loadDanmaku(t,e)},i.prototype.play=function(){this.videoEl.play()},i.prototype.pause=function(){this.videoEl.pause()},i.prototype.seek=function(t){this.videoEl.currentTime=t,this.play()},i.prototype.seeked=function(t){this.videoEl.currentTime=t},i.prototype.seeking=function(t){this.touchMode||this.dispatchEvent(s.seeking,t)},i.prototype.enterFullScreen=function(){this.containerEl.requestFullscreen?this.containerEl.requestFullscreen():this.containerEl.msRequestFullscreen?this.containerEl.msRequestFullscreen():this.containerEl.mozRequestFullScreen?this.containerEl.mozRequestFullScreen():this.containerEl.webkitRequestFullscreen?this.containerEl.webkitRequestFullscreen():this.videoEl.webkitEnterFullscreen&&this.videoEl.webkitEnterFullscreen()},Object.defineProperty(i.prototype,"use3D",{get:function(){return"true"==localStorage.getItem("useGPU")||!1},set:function(t){localStorage.setItem("useGPU",t.toString()),location.reload()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useVR",{get:function(){var t="true"==localStorage.getItem("useVR")||!1;return t?(this.containerEl.classList.add("vr"),this.danmakuManager.resize()):this.containerEl.classList.remove("vr"),t},set:function(t){var e=/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent);return e?/iPhone|iPod/.test(navigator.userAgent)&&!navigator.standalone?void alert("请回到首页然后点击Safari菜单中的添加到主屏幕,然后从主屏幕中的图标进入本站观看VR模式"):(localStorage.setItem("useVR",t.toString()),this.use3D?this.danmakuManager.useVR=t:this.use3D=!0,void(this.useVR?this.containerEl.classList.add("vr"):this.containerEl.classList.remove("vr"))):void alert("请使用移动设备配合cardboard观看!(oculus等我的到货后支持)")},enumerable:!0,configurable:!0}),i.prototype.exitFullScreen=function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen&&document.mozCancelFullScreen(),this.danmakuManager.resize()},Object.defineProperty(i.prototype,"bufferRange",{get:function(){return 0==this.videoEl.buffered.length?[0,0]:[this.videoEl.buffered.start(0)/this.duration,this.videoEl.buffered.end(0)/this.duration]},enumerable:!0,configurable:!0}),i.prototype.toogleDanmaku=function(){this.danmakuManager.visible=!this.danmakuManager.visible},i}(i);t.Player=r;var n;!function(t){var r;!function(t){t[t.startSeek=0]="startSeek",t[t.seeking=1]="seeking",t[t.seeked=2]="seeked"}(r||(r={}));var n=function(t){function i(){t.call(this),this.initDom()}return __extends(i,t),i.prototype.initDom=function(){var t='<div class="wrapper">\n              <ul>\n                <li><a >Moe2 player 1.0.0</a></li>\n              </ul>\n              <hr/>\n               <ul>\n                    <li><a data-role=\'pause\'>暂停播放</a></li>\n               </ul>\n               <hr/>\n              <ul>\n                       <li>\n                             <a data-role="togleGPU">'+("TRUE"==localStorage.getItem("useGPU")?"关闭3D弹幕":"开启3D弹幕")+"</a>\n                       </li>\n                       <li>\n                            <a >显示视频信息</a>\n                       </li>\n              </ul>\n              <hr/>\n              <ul>\n                <li><a >设置...</a></li>\n                <li><a >全局设置...</a></li>\n                <li><a >关于 Adobe Flash Player 18.0.0.290</a></li>\n              </ul>\n            </div>";this.element=e("div","flake flake_osx"),this.element.innerHTML=t,this.element.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0,this.dispatchEvent("CLICK",t.target.getAttribute("data-role"))}.bind(this),!0)},i.prototype.dispose=function(){this.element.parentElement.removeChild(this.element),this.element=null,this.listeners=null},i}(i);t.ContextMenu=n;var a=function(t){function i(i,s){void 0===s&&(s=!!document.createTouch),t.call(this),this.value=0,this.touchDown=!1,this.seeking=!1,this.player=i,this.element=e("div","progress-wrapper"),this.element.appendChild(this.totalRangeEl=e("div","player-progress-bar")),this.bufferedRangeEl=e("div","buffer-range"),this.totalRangeEl.appendChild(this.bufferedRangeEl),this.currentRangeEl=e("div","current-range"),this.totalRangeEl.appendChild(this.currentRangeEl),this.indicatorEL=e("div","indicator"),this.indicatorEL.appendChild(this.indInner=e("div","ind-inner")),this.totalRangeEl.appendChild(this.indicatorEL),this.touchMode=s,this.downEvent=s?"touchstart":"mousedown",this.moveEvent=s?"touchmove":"mousemove",this.upEvent=s?"touchend":"mouseup",this.element.addEventListener(this.downEvent,function(t){t.preventDefault(),t.stopPropagation(),this.touchDown=!0,this.sliderStartX=t.clientX-t.offsetX,t.target!=this.indicatorEL&&t.target!=this.indInner||(this.sliderStartX-=t.target.offsetLeft,t.target!=this.indicatorEL&&(this.sliderStartX-=this.indicatorEL.offsetLeft));var e=this.getPageX(t)/this.element.offsetWidth;this.downValue=e,t.target!=this.indicatorEL&&t.target!=this.indInner&&(this.setValue(e),this.dispatchEvent(r.startSeek))}.bind(this),!0),window.addEventListener(this.moveEvent,function(t){if(this.touchDown){t.preventDefault();var e=this.getPageX(t)/this.element.offsetWidth;this.setValue(e),this.player.seeking(e*i.duration)}}.bind(this)),window.addEventListener(this.upEvent,function(t){if(this.touchDown){t.preventDefault(),t.stopPropagation(),this.touchDown=!1;var e=this.getPageX(t)/this.element.offsetWidth;if(e==this.downValue)return;this.setValue(e),this.dispatchEvent(r.seeked)}}.bind(this),!0),window.addEventListener("touchcancel",function(){this.touchDown=!1}.bind(this))}return __extends(i,t),i.prototype.getPageX=function(t){return this.touchMode?t.changedTouches[0].pageX:t.clientX-this.sliderStartX},Object.defineProperty(i.prototype,"currentValue",{set:function(t){this.touchDown||this.setValue(t)},enumerable:!0,configurable:!0}),i.prototype.setValue=function(t){t>1&&(t=1),this.currentRangeEl.style.width=100*t+"%",this.indicatorEL.style.left=100*t+"%",this.value=t},Object.defineProperty(i.prototype,"bufferRange",{set:function(t){this.bufferedRangeEl.style.left=100*t[0]+"%",this.bufferedRangeEl.style.width=100*(t[1]-t[0])+"%"},enumerable:!0,configurable:!0}),i}(i),o=function(t){function i(i,n,o){if(void 0===n&&(n=null),void 0===o&&(o=!!document.createTouch),t.call(this),this.lastActive=0,this.visible=!0,this.lastClickTime=0,this.player=i,this.progressBar=new a(i),this.element=e("div","control-layer"),this.controlPanelEl=e("div","control-panel"),this.element.appendChild(this.controlPanelEl),this.controlPanelEl.appendChild(this.progressBar.element),n){var M=e("div","video-title");M.innerHTML="<h3>"+n+"</h3>",this.element.appendChild(M)}var u=e("div","");this.playIconEl=e("i","fa fa-lg fa-play play-icon"),u.appendChild(this.playIconEl),this.controlPanelEl.appendChild(this.fullScreenIcon=e("i","fa fa-lg fa-arrows-alt fullscreen-icon")),this.controlPanelEl.appendChild(this.danmakuIconEl=e("i","fa fa-lg fa-bars danmaku-icon icon-active")),this.controlPanelEl.appendChild(this.icon3DEl=e("span","fa fa-lg danmaku-icon")),this.icon3DEl.innerHTML="<strong>3D</strong>",this.player.use3D&&this.icon3DEl.classList.add("icon-active"),this.controlPanelEl.appendChild(this.vrIconEl=e("span","fa fa-lg danmaku-icon")),this.vrIconEl.innerHTML="<strong>VR</strong>",this.player.useVR&&this.vrIconEl.classList.add("icon-active"),this.controlPanelEl.appendChild(u);var A=e("div","time-indicator");A.appendChild(this.currentTimeEl=e("span","current-time")),A.appendChild(this.durationEl=e("span","total-time")),this.controlPanelEl.appendChild(A),this.touchMode=o,this.downEvent=o?"touchstart":"mousedown",this.moveEvent=o?"touchmove":"mousemove",this.upEvent=o?"touchend":"mouseup",this.player.addEventListener(s.ready,function(){this.durationEl.innerHTML="/"+this.parseTime(this.player.duration),this.currentTimeEl.innerHTML=this.parseTime(this.player.currentTime)}.bind(this)),this.player.addEventListener(s.timeupdate,this.updateTime.bind(this)),this.progressBar.addEventListener(r.startSeek,function(){this.player.seek(this.progressBar.value*this.player.duration)}.bind(this),!0),this.progressBar.addEventListener(r.seeked,function(){this.player.seek(this.progressBar.value*this.player.duration)}.bind(this)),u.addEventListener(this.upEvent,function(t){t.preventDefault(),t.stopPropagation(),this.tooglePlay(),this.lastActive=Date.now()}.bind(this),!0),this.fullScreenIcon.addEventListener(this.upEvent,this.toogleFS.bind(this),!0),this.danmakuIconEl.addEventListener(this.upEvent,this.toogleDanmaku.bind(this),!0),this.icon3DEl.addEventListener(this.upEvent,this.toogle3D.bind(this),!0),this.vrIconEl.addEventListener(this.upEvent,this.toogleVR.bind(this),!0),this.player.addEventListener(s.play,function(){this.playIconEl.classList.remove("fa-play"),this.playIconEl.classList.add("fa-pause"),this.durationEl.innerHTML="/"+this.parseTime(this.player.duration)}.bind(this)),this.player.addEventListener(s.pause,function(){this.playIconEl.classList.remove("fa-pause"),this.playIconEl.classList.add("fa-play")}.bind(this)),this.element.addEventListener(this.upEvent,this.detectDbclick.bind(this),!1),o?this.element.addEventListener("touchend",function(){this.player.isPlaying&&(this.visible?this.hide():(this.lastActive=Date.now(),this.show()))}.bind(this),!1):this.element.addEventListener("mousemove",function(t){this.player.isPlaying&&(this.lastActive=Date.now(),this.show())}.bind(this)),setInterval(function(){return 0==this.player.isPlaying?void this.show():this.progressBar.touchDown?void(this.lastActive=Date.now()):void(Date.now()-this.lastActive>2500&&this.hide())}.bind(this),500),setTimeout(function(){this.element.classList.add("opacity")}.bind(this),2e3)}return __extends(i,t),i.prototype.show=function(){this.element.classList.remove("opacity"),this.visible=!0},i.prototype.hide=function(){this.element.classList.add("opacity"),this.visible=!1},i.prototype.parseTime=function(t){t=t||0,t=Math.round(t);var e=t%60,i=10>e?"0"+e:""+e;t=Math.floor(t/60);var s=t%60,r=10>s?"0"+s:""+s,n=Math.floor(t/60),a=r+":"+i;return n>0&&(a=""+n+":"+a),a},i.prototype.detectDbclick=function(t){var e=Date.now();e-this.lastClickTime<400?this.toogleFS(t):this.lastClickTime=e},i.prototype.updateTime=function(){this.progressBar.currentValue=this.player.currentTime/this.player.duration,this.progressBar.bufferRange=this.player.bufferRange,this.currentTimeEl.innerHTML=this.parseTime(this.player.currentTime)},i.prototype.tooglePlay=function(t){t&&t.stopPropagation(),this.player.isPlaying?this.player.pause():this.player.play()},i.prototype.toogleFS=function(t){t&&t.stopPropagation(),this.player.fullscreenState?this.player.exitFullScreen():this.player.enterFullScreen()},i.prototype.toogleDanmaku=function(t){t&&t.stopPropagation(),this.player.toogleDanmaku(),this.player.danmakuManager.visible?this.danmakuIconEl.classList.add("icon-active"):this.danmakuIconEl.classList.remove("icon-active")},i.prototype.toogle3D=function(t){t&&t.stopPropagation(),this.player.use3D=!this.player.use3D},i.prototype.toogleVR=function(t){t&&t.stopPropagation(),this.player.useVR=!this.player.useVR,this.player.useVR?this.vrIconEl.classList.add("icon-active"):this.vrIconEl.classList.remove("icon-active")},i}(i);t.ControlLayer=o}(n||(n={})),t.PlayerEventBus=new i}(Moe2||(Moe2={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Moe2;!function(t){var e;!function(e){var i=function(i){function s(t){i.call(this),this.p=window.devicePixelRatio,this.drawSettings={color:"ffffff",fontFamily:'"Simhei","Heiti","黑体","Microsoft Yahei",Arial,Helvetica,sans-serif',fontSize:28,strokeColor:"#222222",strokeWidth:2.8,pixelRatio:this.p,p:this.p,duration:10,rowSpace:4},this.isPlaying=!1,this._visible=!0,this.forceUpdate=!0,this.networkManager=null,this.layoutManager=new e.LayoutManager(this)}return __extends(s,i),Object.defineProperty(s.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this._visible?this.canvas.style.display=null:this.canvas.style.display="none"},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"opacity",{set:function(t){this.canvas.style.opacity=t.toString()},enumerable:!0,configurable:!0}),s.prototype.init=function(i){this.player=i,this.player.addEventListener(t.PlayerEvent.play,this.play.bind(this)),this.player.addEventListener(t.PlayerEvent.pause,this.pause.bind(this)),this.player.addEventListener(t.PlayerEvent.buffer,this.pause.bind(this)),this.player.addEventListener(t.PlayerEvent.seeked,this.seek.bind(this)),this.player.addEventListener(t.PlayerEvent.seeking,this.seeking.bind(this)),this.player.addEventListener(t.PlayerEvent.resize,this.resize.bind(this)),t.PlayerEventBus.addEventListener("sendDanmaku",this.sendDanmaku.bind(this)),t.PlayerEventBus.addEventListener("setDanmakuVisible",function(t){this.visible=t}),t.PlayerEventBus.addEventListener("setDanmakuOpacity",function(t){this.opacity=t}),this.canvas=document.createElement("canvas"),1==this.player.use3D&&supportWebGL()?this.renderer=new e.WebglRender(this):this.renderer=new e.Canvas2DRender(this),this.renderer.enableVR=this.player.useVR,this.renderer.init(this.canvas),this.update()},s.prototype.loadDanmaku=function(e,i){void 0===i&&(i="bilibili");var s=new XMLHttpRequest;s.open("GET",e),s.onload=function(){var e;(i="bilibili")?e=t.Danmaku.DMKParser.parseBilibili(s.responseText):(i="acfun")&&(e=t.Danmaku.DMKParser.parseAcfun(JSON.parse(s.responseText))),this.setInitialDanmakuList(e)}.bind(this),s.send()},Object.defineProperty(s.prototype,"useVR",{set:function(t){this.renderer.enableVR=t},enumerable:!0,configurable:!0}),s.prototype.resize=function(){this.width=this.canvas.offsetWidth,this.height=this.canvas.offsetHeight,this.layoutManager&&this.layoutManager.resize(this.width,this.height),this.renderer&&this.renderer.resize(this.width,this.height)},s.prototype.update=function(){return requestAnimationFrame(this.update.bind(this)),this.isPlaying?void(((this.isPlaying=this.player.isPlaying)||this.forceUpdate)&&(this.forceUpdate=!1,this.layoutManager.update(),this._visible&&this.renderer.update())):void this.renderer.update(!0)},s.prototype.play=function(){this.isPlaying||(this.isPlaying=!0,this.layoutManager.start())},s.prototype.pause=function(){this.isPlaying=!1},s.prototype.seeking=function(t){this.isPlaying=!1,this.layoutManager.seeking(t),this.forceUpdate=!0},s.prototype.seek=function(){this.layoutManager.seek(this.player.currentTime),this.isPlaying=this.player.isPlaying,this.forceUpdate=!0},s.prototype.sendDanmaku=function(t){this.layoutManager.insert(t),this.networkManager&&this.networkManager.send(t)},s.prototype.setInitialDanmakuList=function(t){for(var e=0,i=t.length;i>e;e++)t[e].danmakuManager=this;this.layoutManager.loadDanmakuList(t)},s}(t.EventBase);e.DanmakuManager=i;var s=function(t){function i(i,s){t.call(this),this.dmkManager=null,this.vid=i,this.dmkManager=s,this.socket=window.io.connect("/"),this.socket.emit("subscribe",{room:this.vid}),this.socket.on("newdmk",function(t){this.dmkManager.layoutManager.insert(new e.DanmakuItem(this.dmkManager,t.content,t.time,t.type,"#"+t.color.toString("16"),t.fontSize))}.bind(this))}return __extends(i,t),i.prototype.send=function(t){var e={};e.vid=this.vid,e.contnet=t.content,e.time=t.time,e.color=t.color,e.fontSize=t.fontSize,e.type=t.type,this.socket.emit("senddmk",e)},i}(t.EventBase);e.NetworkManager=s;var r=function(){function t(){}return t.parseBilibili=function(t){for(var i=(new DOMParser).parseFromString(t,"text/xml"),s=i.getElementsByTagName("d"),r=[],n=0,a=s.length;a>n;n++)try{var o,M=s[n].attributes.p.nodeValue,u=s[n].childNodes[0].data.trim(),A=M.split(","),c=parseFloat(A[0]);switch(parseInt(A[1])){case 1:o=e.DanmakuType.NORMAL;break;case 4:o=e.DanmakuType.BOTTOM;break;case 5:o=e.DanmakuType.TOP;break;default:continue}var h=parseInt(A[2]),g="#"+parseInt(A[3]).toString(16),l=new e.DanmakuItem(null,u,c,o,g,h);r.push(l)}catch(D){}return r},t.parseAcfun=function(t){for(var i=[],s=0;s<t.length;s++)for(var r=t[s],n=0;n<r.length;n++)try{var a,o=r[n],M=o.c,u=o.m,A=M.split(","),c=parseFloat(A[0]);switch(parseInt(A[2])){case 1:a=e.DanmakuType.NORMAL;break;case 4:a=e.DanmakuType.BOTTOM;break;case 5:a=e.DanmakuType.TOP;break;default:continue}var h=parseInt(A[3]),g="#"+parseInt(A[1]).toString(16),l=new e.DanmakuItem(null,u,c,a,g,h);i.push(l)}catch(D){}return i},t.parse=function(e,i){switch(i){case"ac":return t.parseAcfun(e);case"bi":return t.parseBilibili(e)}},t}();e.DMKParser=r}(e=t.Danmaku||(t.Danmaku={}))}(Moe2||(Moe2={}));var Moe2;!function(t){var e;!function(t){!function(t){t[t.NORMAL=0]="NORMAL",t[t.TOP=1]="TOP",t[t.BOTTOM=2]="BOTTOM"}(t.DanmakuType||(t.DanmakuType={}));var e=t.DanmakuType,i=function(){function t(t,i,s,r,n,a){this.time=0,this.type=0,this.fontSize=0,this.row=0,this.left=0,this.buffer=null,this.width=0,this.height=0,this.texposStart=0,this.texposEnd=0,this.zpos=0,this.danmakuManager=t,this.content=i,this.time=s,this.type=r?r:e.NORMAL,this.color=n?n:t.drawSettings.color,this.fontSize=a||t.drawSettings.fontSize}return t.prototype.drawBuffer=function(){this.buffer||this.danmakuManager.renderer.drawItemBuffer(this)},t.prototype.dropBuffer=function(){this.buffer=null},t}();t.DanmakuItem=i}(e=t.Danmaku||(t.Danmaku={}))}(Moe2||(Moe2={}));var Moe2;!function(t){var e;!function(t){var e=function(){function e(t){this.initialList=[],this.appendList=[],this.initialListRange=[0,0],this.appendListRange=[0,0],this.currentTime=0,this.startTime=0,this.videoStartTime=0,this.rowCount=0,this.rowTail=[],this.staticRow=[],this.lastSeekingTime=0,this.lastSeekingDirectionRightForward=!0,this.isPlaying=!1,this.danmakuManager=t}return e.prototype.loadDanmakuList=function(t){this.initialList=t,this.initialListRange=[0,0],this.rowTail=[],this.staticRow=[],this.initialList.sort(function(t,e){return t.time-e.time})},e.prototype.loadDanmakuListQM=function(t){for(var e=0;e<t.length;++e)this.initialList.push(this.parseItemQM(t[e]));this.initialList.sort(function(t,e){return t.time-e.time})},e.prototype.parseItemQM=function(e){var i=e[6],s=i&&i[1]?i[1]:this.danmakuManager.drawSettings.color,r=i&&i[2]?i[2]:this.danmakuManager.drawSettings.fontSize;return new t.DanmakuItem(this.danmakuManager,e[3],e[2]?e[2]:.1,e[10],s,r)},e.prototype.start=function(){this.isPlaying=!0,this.seek()},e.prototype.pause=function(){this.isPlaying=!1},e.prototype.seek=function(t){void 0===t&&(t=null),this.isPlaying=this.danmakuManager.isPlaying;var e=t||this.danmakuManager.player.currentTime;this.currentTime=e,this.videoStartTime=e,this.rowTail=[],this.staticRow=[],this.initialListRange=[0,0],this.appendListRange=[0,0],this.startTime=Date.now()/1e3,this.update(!0)},e.prototype.seeking=function(t){this.isPlaying=!1;var e=t-this.lastSeekingTime>0;e!=this.lastSeekingDirectionRightForward&&(this.rowTail=[],this.staticRow=[],this.lastSeekingDirectionRightForward=e),this.lastSeekingTime=t,this.update(!0,t)},e.prototype.insert=function(t){var e=this.danmakuManager.drawSettings,i=this.getTime();this.appendList.push(t),this.appendList.sort(function(t,e){return t.time-e.time}),t.time<i+1.5*e.duration&&t.time>i-1&&(t.drawBuffer(),this.arrange(t,this.getTime())),this.getRange(this.appendList,i,this.appendListRange)},e.prototype.resize=function(t,e){var i=this.danmakuManager.drawSettings;this.rowCount=Math.floor(e/(i.fontSize+i.rowSpace))-2},e.prototype.getTime=function(){return this.isPlaying?this.currentTime=.001*Date.now()-this.startTime+this.videoStartTime:this.currentTime},e.prototype.arrange=function(e,i){var s=this.danmakuManager.drawSettings,r=s.duration,n=this.danmakuManager.width;if(e.type==t.DanmakuType.NORMAL){for(var a,o=Number.MAX_VALUE,M=0;M<this.rowCount;M++){if(!this.rowTail[M])return this.rowTail[M]=e,void(e.row=M);var u=this.rowTail[M];if(!u.buffer)return this.rowTail[M]=e,void(e.row=M);if(u.time>i)return this.rowTail[M]=e,void(e.row=M);if(u.time<e.time-u.width/(this.danmakuManager.canvas.width+2*u.width)*r)return this.rowTail[M]=e,void(e.row=M);if(e.time-u.width/this.danmakuManager.p/(n+u.width/this.danmakuManager.p)*r>u.time)return this.rowTail[M]=e,void(e.row=M);u.time<o&&(o=u.time,a=M)}this.rowTail[a]=e,e.row=a}if(e.type==t.DanmakuType.TOP){for(var a,o=Number.MAX_VALUE,M=0;M<this.rowCount;M++){if(!this.staticRow[M])return this.staticRow[M]=e,void(e.row=M);if(e.time-this.staticRow[M].time>r)return this.staticRow[M]=e,void(e.row=M);this.staticRow[M].time<o&&(o=this.staticRow[M].time,a=M)}this.staticRow[a]=e,e.row=a}if(e.type==t.DanmakuType.BOTTOM){for(var a,o=Number.MAX_VALUE,M=this.rowCount-1;M>=0;M--){if(!this.staticRow[M])return this.staticRow[M]=e,void(e.row=M);if(e.time-this.staticRow[M].time>r)return this.staticRow[M]=e,void(e.row=M);this.staticRow[M].time<o&&(o=this.staticRow[M].time,a=M)}this.staticRow[a]=e,e.row=a}},e.prototype.getRange=function(t,e,i){var s=this.danmakuManager.drawSettings,r=s.duration;if(t[i[1]])for(;t[i[1]].time<e&&i[1]<t.length&&(i[1]++,t[i[1]]);)t[i[1]].time>e-3*r&&(t[i[1]].drawBuffer(),this.arrange(t[i[1]],e));if(t[i[0]])for(;t[i[0]].time<e-r&&i[0]+1<t.length&&(i[0]++,t[i[0]-1]);)t[i[0]-1].dropBuffer();if(t[i[0]-1])for(;t[i[0]-1].time>e-r&&i[0]-1>0&&(i[0]--,t[i[0]-1]);)t[i[0]].time<e&&(t[i[0]].row=Math.round(Math.random()*this.rowCount),t[i[0]].drawBuffer());if(t[i[1]-1])for(;t[i[1]-1].time>e&&i[1]-1>0&&(i[1]--,t[i[1]-1]);)t[i[1]].dropBuffer()},e.prototype.updateListPosition=function(e,i,s,r){for(var n=this.danmakuManager.drawSettings,a=n.duration,o=this.danmakuManager.width,M=e-1;i+1>=M;M++){var u=s[M];u&&(u.type==t.DanmakuType.NORMAL&&(u.left=o*n.p+(o*n.p+u.width)/a*(u.time-r)),u.type!=t.DanmakuType.TOP&&u.type!=t.DanmakuType.BOTTOM||(u.left=.5*o*n.p-.5*u.width))}},e.prototype.update=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=null),this.isPlaying=this.danmakuManager.isPlaying,this.isPlaying||t){var i=e||this.getTime();this.getRange(this.initialList,i,this.initialListRange),this.getRange(this.appendList,i,this.appendListRange),this.updateListPosition(this.initialListRange[0],this.initialListRange[1],this.initialList,i),this.updateListPosition(this.appendListRange[0],this.appendListRange[1],this.appendList,i)}},e}();t.LayoutManager=e}(e=t.Danmaku||(t.Danmaku={}))}(Moe2||(Moe2={})),function(t){"use strict";var e={};"undefined"==typeof exports?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e.exports={},define(function(){return e.exports})):e.exports="undefined"!=typeof window?window:t:e.exports=exports,function(t){if(!e)var e=1e-6;if(!i)var i="undefined"!=typeof Float32Array?Float32Array:Array;if(!s)var s=Math.random;var r={};r.setMatrixArrayType=function(t){i=t},"undefined"!=typeof t&&(t.glMatrix=r);var n=Math.PI/180;r.toRadian=function(t){return t*n};var a={};a.create=function(){var t=new i(2);return t[0]=0,t[1]=0,t},a.clone=function(t){var e=new i(2);return e[0]=t[0],e[1]=t[1],e},a.fromValues=function(t,e){var s=new i(2);return s[0]=t,s[1]=e,s},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},a.set=function(t,e,i){return t[0]=e,t[1]=i,t},a.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},a.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},a.sub=a.subtract,a.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},a.mul=a.multiply,a.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},a.div=a.divide,a.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},a.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t},a.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},a.scaleAndAdd=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t},a.distance=function(t,e){var i=e[0]-t[0],s=e[1]-t[1];return Math.sqrt(i*i+s*s)},a.dist=a.distance,a.squaredDistance=function(t,e){var i=e[0]-t[0],s=e[1]-t[1];return i*i+s*s},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],i=t[1];return Math.sqrt(e*e+i*i);
},a.len=a.length,a.squaredLength=function(t){var e=t[0],i=t[1];return e*e+i*i},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},a.normalize=function(t,e){var i=e[0],s=e[1],r=i*i+s*s;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},a.cross=function(t,e,i){var s=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=s,t},a.lerp=function(t,e,i,s){var r=e[0],n=e[1];return t[0]=r+s*(i[0]-r),t[1]=n+s*(i[1]-n),t},a.random=function(t,e){e=e||1;var i=2*s()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t},a.transformMat2=function(t,e,i){var s=e[0],r=e[1];return t[0]=i[0]*s+i[2]*r,t[1]=i[1]*s+i[3]*r,t},a.transformMat2d=function(t,e,i){var s=e[0],r=e[1];return t[0]=i[0]*s+i[2]*r+i[4],t[1]=i[1]*s+i[3]*r+i[5],t},a.transformMat3=function(t,e,i){var s=e[0],r=e[1];return t[0]=i[0]*s+i[3]*r+i[6],t[1]=i[1]*s+i[4]*r+i[7],t},a.transformMat4=function(t,e,i){var s=e[0],r=e[1];return t[0]=i[0]*s+i[4]*r+i[12],t[1]=i[1]*s+i[5]*r+i[13],t},a.forEach=function(){var t=a.create();return function(e,i,s,r,n,a){var o,M;for(i||(i=2),s||(s=0),M=r?Math.min(r*i+s,e.length):e.length,o=s;M>o;o+=i)t[0]=e[o],t[1]=e[o+1],n(t,t,a),e[o]=t[0],e[o+1]=t[1];return e}}(),a.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},"undefined"!=typeof t&&(t.vec2=a);var o={};o.create=function(){var t=new i(3);return t[0]=0,t[1]=0,t[2]=0,t},o.clone=function(t){var e=new i(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.fromValues=function(t,e,s){var r=new i(3);return r[0]=t,r[1]=e,r[2]=s,r},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.set=function(t,e,i,s){return t[0]=e,t[1]=i,t[2]=s,t},o.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},o.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},o.sub=o.subtract,o.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t},o.mul=o.multiply,o.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t},o.div=o.divide,o.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t},o.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t},o.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},o.scaleAndAdd=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t},o.distance=function(t,e){var i=e[0]-t[0],s=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(i*i+s*s+r*r)},o.dist=o.distance,o.squaredDistance=function(t,e){var i=e[0]-t[0],s=e[1]-t[1],r=e[2]-t[2];return i*i+s*s+r*r},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],i=t[1],s=t[2];return Math.sqrt(e*e+i*i+s*s)},o.len=o.length,o.squaredLength=function(t){var e=t[0],i=t[1],s=t[2];return e*e+i*i+s*s},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},o.normalize=function(t,e){var i=e[0],s=e[1],r=e[2],n=i*i+s*s+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},o.cross=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=i[0],o=i[1],M=i[2];return t[0]=r*M-n*o,t[1]=n*a-s*M,t[2]=s*o-r*a,t},o.lerp=function(t,e,i,s){var r=e[0],n=e[1],a=e[2];return t[0]=r+s*(i[0]-r),t[1]=n+s*(i[1]-n),t[2]=a+s*(i[2]-a),t},o.random=function(t,e){e=e||1;var i=2*s()*Math.PI,r=2*s()-1,n=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=r*e,t},o.transformMat4=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=i[3]*s+i[7]*r+i[11]*n+i[15];return a=a||1,t[0]=(i[0]*s+i[4]*r+i[8]*n+i[12])/a,t[1]=(i[1]*s+i[5]*r+i[9]*n+i[13])/a,t[2]=(i[2]*s+i[6]*r+i[10]*n+i[14])/a,t},o.transformMat3=function(t,e,i){var s=e[0],r=e[1],n=e[2];return t[0]=s*i[0]+r*i[3]+n*i[6],t[1]=s*i[1]+r*i[4]+n*i[7],t[2]=s*i[2]+r*i[5]+n*i[8],t},o.transformQuat=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=i[0],o=i[1],M=i[2],u=i[3],A=u*s+o*n-M*r,c=u*r+M*s-a*n,h=u*n+a*r-o*s,g=-a*s-o*r-M*n;return t[0]=A*u+g*-a+c*-M-h*-o,t[1]=c*u+g*-o+h*-a-A*-M,t[2]=h*u+g*-M+A*-o-c*-a,t},o.rotateX=function(t,e,i,s){var r=[],n=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],n[0]=r[0],n[1]=r[1]*Math.cos(s)-r[2]*Math.sin(s),n[2]=r[1]*Math.sin(s)+r[2]*Math.cos(s),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},o.rotateY=function(t,e,i,s){var r=[],n=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],n[0]=r[2]*Math.sin(s)+r[0]*Math.cos(s),n[1]=r[1],n[2]=r[2]*Math.cos(s)-r[0]*Math.sin(s),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},o.rotateZ=function(t,e,i,s){var r=[],n=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],n[0]=r[0]*Math.cos(s)-r[1]*Math.sin(s),n[1]=r[0]*Math.sin(s)+r[1]*Math.cos(s),n[2]=r[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},o.forEach=function(){var t=o.create();return function(e,i,s,r,n,a){var o,M;for(i||(i=3),s||(s=0),M=r?Math.min(r*i+s,e.length):e.length,o=s;M>o;o+=i)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],n(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}}(),o.angle=function(t,e){var i=o.fromValues(t[0],t[1],t[2]),s=o.fromValues(e[0],e[1],e[2]);o.normalize(i,i),o.normalize(s,s);var r=o.dot(i,s);return r>1?0:Math.acos(r)},o.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof t&&(t.vec3=o);var M={};M.create=function(){var t=new i(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},M.clone=function(t){var e=new i(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},M.fromValues=function(t,e,s,r){var n=new i(4);return n[0]=t,n[1]=e,n[2]=s,n[3]=r,n},M.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},M.set=function(t,e,i,s,r){return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t},M.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},M.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t},M.sub=M.subtract,M.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t},M.mul=M.multiply,M.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t},M.div=M.divide,M.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t},M.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t},M.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},M.scaleAndAdd=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t},M.distance=function(t,e){var i=e[0]-t[0],s=e[1]-t[1],r=e[2]-t[2],n=e[3]-t[3];return Math.sqrt(i*i+s*s+r*r+n*n)},M.dist=M.distance,M.squaredDistance=function(t,e){var i=e[0]-t[0],s=e[1]-t[1],r=e[2]-t[2],n=e[3]-t[3];return i*i+s*s+r*r+n*n},M.sqrDist=M.squaredDistance,M.length=function(t){var e=t[0],i=t[1],s=t[2],r=t[3];return Math.sqrt(e*e+i*i+s*s+r*r)},M.len=M.length,M.squaredLength=function(t){var e=t[0],i=t[1],s=t[2],r=t[3];return e*e+i*i+s*s+r*r},M.sqrLen=M.squaredLength,M.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},M.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},M.normalize=function(t,e){var i=e[0],s=e[1],r=e[2],n=e[3],a=i*i+s*s+r*r+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a),t},M.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},M.lerp=function(t,e,i,s){var r=e[0],n=e[1],a=e[2],o=e[3];return t[0]=r+s*(i[0]-r),t[1]=n+s*(i[1]-n),t[2]=a+s*(i[2]-a),t[3]=o+s*(i[3]-o),t},M.random=function(t,e){return e=e||1,t[0]=s(),t[1]=s(),t[2]=s(),t[3]=s(),M.normalize(t,t),M.scale(t,t,e),t},M.transformMat4=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=e[3];return t[0]=i[0]*s+i[4]*r+i[8]*n+i[12]*a,t[1]=i[1]*s+i[5]*r+i[9]*n+i[13]*a,t[2]=i[2]*s+i[6]*r+i[10]*n+i[14]*a,t[3]=i[3]*s+i[7]*r+i[11]*n+i[15]*a,t},M.transformQuat=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=i[0],o=i[1],M=i[2],u=i[3],A=u*s+o*n-M*r,c=u*r+M*s-a*n,h=u*n+a*r-o*s,g=-a*s-o*r-M*n;return t[0]=A*u+g*-a+c*-M-h*-o,t[1]=c*u+g*-o+h*-a-A*-M,t[2]=h*u+g*-M+A*-o-c*-a,t},M.forEach=function(){var t=M.create();return function(e,i,s,r,n,a){var o,M;for(i||(i=4),s||(s=0),M=r?Math.min(r*i+s,e.length):e.length,o=s;M>o;o+=i)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],n(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}(),M.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.vec4=M);var u={};u.create=function(){var t=new i(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},u.clone=function(t){var e=new i(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},u.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},u.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},u.transpose=function(t,e){if(t===e){var i=e[1];t[1]=e[2],t[2]=i}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},u.invert=function(t,e){var i=e[0],s=e[1],r=e[2],n=e[3],a=i*n-r*s;return a?(a=1/a,t[0]=n*a,t[1]=-s*a,t[2]=-r*a,t[3]=i*a,t):null},u.adjoint=function(t,e){var i=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=i,t},u.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},u.multiply=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=e[3],o=i[0],M=i[1],u=i[2],A=i[3];return t[0]=s*o+n*M,t[1]=r*o+a*M,t[2]=s*u+n*A,t[3]=r*u+a*A,t},u.mul=u.multiply,u.rotate=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=e[3],o=Math.sin(i),M=Math.cos(i);return t[0]=s*M+n*o,t[1]=r*M+a*o,t[2]=s*-o+n*M,t[3]=r*-o+a*M,t},u.scale=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=e[3],o=i[0],M=i[1];return t[0]=s*o,t[1]=r*o,t[2]=n*M,t[3]=a*M,t},u.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},u.LDU=function(t,e,i,s){return t[2]=s[2]/s[0],i[0]=s[0],i[1]=s[1],i[3]=s[3]-t[2]*i[1],[t,e,i]},"undefined"!=typeof t&&(t.mat2=u);var A={};A.create=function(){var t=new i(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},A.clone=function(t){var e=new i(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},A.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},A.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},A.invert=function(t,e){var i=e[0],s=e[1],r=e[2],n=e[3],a=e[4],o=e[5],M=i*n-s*r;return M?(M=1/M,t[0]=n*M,t[1]=-s*M,t[2]=-r*M,t[3]=i*M,t[4]=(r*o-n*a)*M,t[5]=(s*a-i*o)*M,t):null},A.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},A.multiply=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],M=e[5],u=i[0],A=i[1],c=i[2],h=i[3],g=i[4],l=i[5];return t[0]=s*u+n*A,t[1]=r*u+a*A,t[2]=s*c+n*h,t[3]=r*c+a*h,t[4]=s*g+n*l+o,t[5]=r*g+a*l+M,t},A.mul=A.multiply,A.rotate=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],M=e[5],u=Math.sin(i),A=Math.cos(i);return t[0]=s*A+n*u,t[1]=r*A+a*u,t[2]=s*-u+n*A,t[3]=r*-u+a*A,t[4]=o,t[5]=M,t},A.scale=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],M=e[5],u=i[0],A=i[1];return t[0]=s*u,t[1]=r*u,t[2]=n*A,t[3]=a*A,t[4]=o,t[5]=M,t},A.translate=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],M=e[5],u=i[0],A=i[1];return t[0]=s,t[1]=r,t[2]=n,t[3]=a,t[4]=s*u+n*A+o,t[5]=r*u+a*A+M,t},A.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},A.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},"undefined"!=typeof t&&(t.mat2d=A);var c={};c.create=function(){var t=new i(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},c.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},c.clone=function(t){var e=new i(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},c.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},c.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},c.transpose=function(t,e){if(t===e){var i=e[1],s=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=s,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},c.invert=function(t,e){var i=e[0],s=e[1],r=e[2],n=e[3],a=e[4],o=e[5],M=e[6],u=e[7],A=e[8],c=A*a-o*u,h=-A*n+o*M,g=u*n-a*M,l=i*c+s*h+r*g;return l?(l=1/l,t[0]=c*l,t[1]=(-A*s+r*u)*l,t[2]=(o*s-r*a)*l,t[3]=h*l,t[4]=(A*i-r*M)*l,t[5]=(-o*i+r*n)*l,t[6]=g*l,t[7]=(-u*i+s*M)*l,t[8]=(a*i-s*n)*l,t):null},c.adjoint=function(t,e){var i=e[0],s=e[1],r=e[2],n=e[3],a=e[4],o=e[5],M=e[6],u=e[7],A=e[8];return t[0]=a*A-o*u,t[1]=r*u-s*A,t[2]=s*o-r*a,t[3]=o*M-n*A,t[4]=i*A-r*M,t[5]=r*n-i*o,t[6]=n*u-a*M,t[7]=s*M-i*u,t[8]=i*a-s*n,t},c.determinant=function(t){var e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],a=t[5],o=t[6],M=t[7],u=t[8];return e*(u*n-a*M)+i*(-u*r+a*o)+s*(M*r-n*o)},c.multiply=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],M=e[5],u=e[6],A=e[7],c=e[8],h=i[0],g=i[1],l=i[2],D=i[3],N=i[4],y=i[5],d=i[6],L=i[7],T=i[8];return t[0]=h*s+g*a+l*u,t[1]=h*r+g*o+l*A,t[2]=h*n+g*M+l*c,t[3]=D*s+N*a+y*u,t[4]=D*r+N*o+y*A,t[5]=D*n+N*M+y*c,t[6]=d*s+L*a+T*u,t[7]=d*r+L*o+T*A,t[8]=d*n+L*M+T*c,t},c.mul=c.multiply,c.translate=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],M=e[5],u=e[6],A=e[7],c=e[8],h=i[0],g=i[1];return t[0]=s,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=M,t[6]=h*s+g*a+u,t[7]=h*r+g*o+A,t[8]=h*n+g*M+c,t},c.rotate=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],M=e[5],u=e[6],A=e[7],c=e[8],h=Math.sin(i),g=Math.cos(i);return t[0]=g*s+h*a,t[1]=g*r+h*o,t[2]=g*n+h*M,t[3]=g*a-h*s,t[4]=g*o-h*r,t[5]=g*M-h*n,t[6]=u,t[7]=A,t[8]=c,t},c.scale=function(t,e,i){var s=i[0],r=i[1];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},c.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},c.fromQuat=function(t,e){var i=e[0],s=e[1],r=e[2],n=e[3],a=i+i,o=s+s,M=r+r,u=i*a,A=s*a,c=s*o,h=r*a,g=r*o,l=r*M,D=n*a,N=n*o,y=n*M;return t[0]=1-c-l,t[3]=A-y,t[6]=h+N,t[1]=A+y,t[4]=1-u-l,t[7]=g-D,t[2]=h-N,t[5]=g+D,t[8]=1-u-c,t},c.normalFromMat4=function(t,e){var i=e[0],s=e[1],r=e[2],n=e[3],a=e[4],o=e[5],M=e[6],u=e[7],A=e[8],c=e[9],h=e[10],g=e[11],l=e[12],D=e[13],N=e[14],y=e[15],d=i*o-s*a,L=i*M-r*a,T=i*u-n*a,E=s*M-r*o,j=s*u-n*o,I=r*u-n*M,w=A*D-c*l,f=A*N-h*l,p=A*y-g*l,x=c*N-h*D,z=c*y-g*D,m=h*y-g*N,C=d*m-L*z+T*x+E*p-j*f+I*w;return C?(C=1/C,t[0]=(o*m-M*z+u*x)*C,t[1]=(M*p-a*m-u*f)*C,t[2]=(a*z-o*p+u*w)*C,t[3]=(r*z-s*m-n*x)*C,t[4]=(i*m-r*p+n*f)*C,t[5]=(s*p-i*z-n*w)*C,t[6]=(D*I-N*j+y*E)*C,t[7]=(N*T-l*I-y*L)*C,t[8]=(l*j-D*T+y*d)*C,t):null},c.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},c.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},"undefined"!=typeof t&&(t.mat3=c);var h={};h.create=function(){var t=new i(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},h.clone=function(t){return new Float32Array(t)},h.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},h.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},h.transpose=function(t,e){if(t===e){var i=e[1],s=e[2],r=e[3],n=e[6],a=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=n,t[11]=e[14],t[12]=r,t[13]=a,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},h.invert=function(t,e){var i=e[0],s=e[1],r=e[2],n=e[3],a=e[4],o=e[5],M=e[6],u=e[7],A=e[8],c=e[9],h=e[10],g=e[11],l=e[12],D=e[13],N=e[14],y=e[15],d=i*o-s*a,L=i*M-r*a,T=i*u-n*a,E=s*M-r*o,j=s*u-n*o,I=r*u-n*M,w=A*D-c*l,f=A*N-h*l,p=A*y-g*l,x=c*N-h*D,z=c*y-g*D,m=h*y-g*N,C=d*m-L*z+T*x+E*p-j*f+I*w;return C?(C=1/C,t[0]=(o*m-M*z+u*x)*C,t[1]=(r*z-s*m-n*x)*C,t[2]=(D*I-N*j+y*E)*C,t[3]=(h*j-c*I-g*E)*C,t[4]=(M*p-a*m-u*f)*C,t[5]=(i*m-r*p+n*f)*C,t[6]=(N*T-l*I-y*L)*C,t[7]=(A*I-h*T+g*L)*C,t[8]=(a*z-o*p+u*w)*C,t[9]=(s*p-i*z-n*w)*C,t[10]=(l*j-D*T+y*d)*C,t[11]=(c*T-A*j-g*d)*C,t[12]=(o*f-a*x-M*w)*C,t[13]=(i*x-s*f+r*w)*C,t[14]=(D*L-l*E-N*d)*C,t[15]=(A*E-c*L+h*d)*C,t):null},h.adjoint=function(t,e){var i=e[0],s=e[1],r=e[2],n=e[3],a=e[4],o=e[5],M=e[6],u=e[7],A=e[8],c=e[9],h=e[10],g=e[11],l=e[12],D=e[13],N=e[14],y=e[15];return t[0]=o*(h*y-g*N)-c*(M*y-u*N)+D*(M*g-u*h),t[1]=-(s*(h*y-g*N)-c*(r*y-n*N)+D*(r*g-n*h)),t[2]=s*(M*y-u*N)-o*(r*y-n*N)+D*(r*u-n*M),t[3]=-(s*(M*g-u*h)-o*(r*g-n*h)+c*(r*u-n*M)),t[4]=-(a*(h*y-g*N)-A*(M*y-u*N)+l*(M*g-u*h)),t[5]=i*(h*y-g*N)-A*(r*y-n*N)+l*(r*g-n*h),t[6]=-(i*(M*y-u*N)-a*(r*y-n*N)+l*(r*u-n*M)),t[7]=i*(M*g-u*h)-a*(r*g-n*h)+A*(r*u-n*M),t[8]=a*(c*y-g*D)-A*(o*y-u*D)+l*(o*g-u*c),t[9]=-(i*(c*y-g*D)-A*(s*y-n*D)+l*(s*g-n*c)),t[10]=i*(o*y-u*D)-a*(s*y-n*D)+l*(s*u-n*o),t[11]=-(i*(o*g-u*c)-a*(s*g-n*c)+A*(s*u-n*o)),t[12]=-(a*(c*N-h*D)-A*(o*N-M*D)+l*(o*h-M*c)),t[13]=i*(c*N-h*D)-A*(s*N-r*D)+l*(s*h-r*c),t[14]=-(i*(o*N-M*D)-a*(s*N-r*D)+l*(s*M-r*o)),t[15]=i*(o*h-M*c)-a*(s*h-r*c)+A*(s*M-r*o),t},h.determinant=function(t){var e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],a=t[5],o=t[6],M=t[7],u=t[8],A=t[9],c=t[10],h=t[11],g=t[12],l=t[13],D=t[14],N=t[15],y=e*a-i*n,d=e*o-s*n,L=e*M-r*n,T=i*o-s*a,E=i*M-r*a,j=s*M-r*o,I=u*l-A*g,w=u*D-c*g,f=u*N-h*g,p=A*D-c*l,x=A*N-h*l,z=c*N-h*D;return y*z-d*x+L*p+T*f-E*w+j*I},h.multiply=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],M=e[5],u=e[6],A=e[7],c=e[8],h=e[9],g=e[10],l=e[11],D=e[12],N=e[13],y=e[14],d=e[15],L=i[0],T=i[1],E=i[2],j=i[3];return t[0]=L*s+T*o+E*c+j*D,t[1]=L*r+T*M+E*h+j*N,t[2]=L*n+T*u+E*g+j*y,t[3]=L*a+T*A+E*l+j*d,L=i[4],T=i[5],E=i[6],j=i[7],t[4]=L*s+T*o+E*c+j*D,t[5]=L*r+T*M+E*h+j*N,t[6]=L*n+T*u+E*g+j*y,t[7]=L*a+T*A+E*l+j*d,L=i[8],T=i[9],E=i[10],j=i[11],t[8]=L*s+T*o+E*c+j*D,t[9]=L*r+T*M+E*h+j*N,t[10]=L*n+T*u+E*g+j*y,t[11]=L*a+T*A+E*l+j*d,L=i[12],T=i[13],E=i[14],j=i[15],t[12]=L*s+T*o+E*c+j*D,t[13]=L*r+T*M+E*h+j*N,t[14]=L*n+T*u+E*g+j*y,t[15]=L*a+T*A+E*l+j*d,t},h.mul=h.multiply,h.translate=function(t,e,i){var s,r,n,a,o,M,u,A,c,h,g,l,D=i[0],N=i[1],y=i[2];return e===t?(t[12]=e[0]*D+e[4]*N+e[8]*y+e[12],t[13]=e[1]*D+e[5]*N+e[9]*y+e[13],t[14]=e[2]*D+e[6]*N+e[10]*y+e[14],t[15]=e[3]*D+e[7]*N+e[11]*y+e[15]):(s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],M=e[5],u=e[6],A=e[7],c=e[8],h=e[9],g=e[10],l=e[11],t[0]=s,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=M,t[6]=u,t[7]=A,t[8]=c,t[9]=h,t[10]=g,t[11]=l,t[12]=s*D+o*N+c*y+e[12],t[13]=r*D+M*N+h*y+e[13],t[14]=n*D+u*N+g*y+e[14],t[15]=a*D+A*N+l*y+e[15]),t},h.scale=function(t,e,i){var s=i[0],r=i[1],n=i[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},h.rotate=function(t,i,s,r){var n,a,o,M,u,A,c,h,g,l,D,N,y,d,L,T,E,j,I,w,f,p,x,z,m=r[0],C=r[1],O=r[2],v=Math.sqrt(m*m+C*C+O*O);return Math.abs(v)<e?null:(v=1/v,m*=v,C*=v,O*=v,n=Math.sin(s),a=Math.cos(s),o=1-a,M=i[0],u=i[1],A=i[2],c=i[3],h=i[4],g=i[5],l=i[6],D=i[7],N=i[8],y=i[9],d=i[10],L=i[11],T=m*m*o+a,E=C*m*o+O*n,j=O*m*o-C*n,I=m*C*o-O*n,w=C*C*o+a,f=O*C*o+m*n,p=m*O*o+C*n,x=C*O*o-m*n,z=O*O*o+a,t[0]=M*T+h*E+N*j,t[1]=u*T+g*E+y*j,t[2]=A*T+l*E+d*j,t[3]=c*T+D*E+L*j,t[4]=M*I+h*w+N*f,t[5]=u*I+g*w+y*f,t[6]=A*I+l*w+d*f,t[7]=c*I+D*w+L*f,t[8]=M*p+h*x+N*z,t[9]=u*p+g*x+y*z,t[10]=A*p+l*x+d*z,t[11]=c*p+D*x+L*z,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t)},h.rotateX=function(t,e,i){var s=Math.sin(i),r=Math.cos(i),n=e[4],a=e[5],o=e[6],M=e[7],u=e[8],A=e[9],c=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*r+u*s,t[5]=a*r+A*s,t[6]=o*r+c*s,t[7]=M*r+h*s,t[8]=u*r-n*s,t[9]=A*r-a*s,t[10]=c*r-o*s,t[11]=h*r-M*s,t},h.rotateY=function(t,e,i){var s=Math.sin(i),r=Math.cos(i),n=e[0],a=e[1],o=e[2],M=e[3],u=e[8],A=e[9],c=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*r-u*s,t[1]=a*r-A*s,t[2]=o*r-c*s,t[3]=M*r-h*s,t[8]=n*s+u*r,t[9]=a*s+A*r,t[10]=o*s+c*r,t[11]=M*s+h*r,t},h.rotateZ=function(t,e,i){var s=Math.sin(i),r=Math.cos(i),n=e[0],a=e[1],o=e[2],M=e[3],u=e[4],A=e[5],c=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*r+u*s,t[1]=a*r+A*s,t[2]=o*r+c*s,t[3]=M*r+h*s,t[4]=u*r-n*s,t[5]=A*r-a*s,t[6]=c*r-o*s,t[7]=h*r-M*s,t},h.fromRotationTranslation=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=e[3],o=s+s,M=r+r,u=n+n,A=s*o,c=s*M,h=s*u,g=r*M,l=r*u,D=n*u,N=a*o,y=a*M,d=a*u;return t[0]=1-(g+D),t[1]=c+d,t[2]=h-y,t[3]=0,t[4]=c-d,t[5]=1-(A+D),t[6]=l+N,t[7]=0,t[8]=h+y,t[9]=l-N,t[10]=1-(A+g),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},h.fromQuat=function(t,e){var i=e[0],s=e[1],r=e[2],n=e[3],a=i+i,o=s+s,M=r+r,u=i*a,A=s*a,c=s*o,h=r*a,g=r*o,l=r*M,D=n*a,N=n*o,y=n*M;return t[0]=1-c-l,t[1]=A+y,t[2]=h-N,t[3]=0,t[4]=A-y,t[5]=1-u-l,t[6]=g+D,t[7]=0,t[8]=h+N,t[9]=g-D,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},h.frustum=function(t,e,i,s,r,n,a){var o=1/(i-e),M=1/(r-s),u=1/(n-a);return t[0]=2*n*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*M,t[6]=0,t[7]=0,t[8]=(i+e)*o,t[9]=(r+s)*M,t[10]=(a+n)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*n*2*u,t[15]=0,t},h.perspective=function(t,e,i,s,r){var n=1/Math.tan(e/2),a=1/(s-r);return t[0]=n/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+s)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*s*a,t[15]=0,t},h.ortho=function(t,e,i,s,r,n,a){var o=1/(e-i),M=1/(s-r),u=1/(n-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*M,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*o,t[13]=(r+s)*M,t[14]=(a+n)*u,t[15]=1,t},h.lookAt=function(t,i,s,r){var n,a,o,M,u,A,c,g,l,D,N=i[0],y=i[1],d=i[2],L=r[0],T=r[1],E=r[2],j=s[0],I=s[1],w=s[2];return Math.abs(N-j)<e&&Math.abs(y-I)<e&&Math.abs(d-w)<e?h.identity(t):(c=N-j,g=y-I,l=d-w,D=1/Math.sqrt(c*c+g*g+l*l),c*=D,g*=D,l*=D,n=T*l-E*g,a=E*c-L*l,o=L*g-T*c,D=Math.sqrt(n*n+a*a+o*o),D?(D=1/D,n*=D,a*=D,o*=D):(n=0,a=0,o=0),M=g*o-l*a,u=l*n-c*o,A=c*a-g*n,D=Math.sqrt(M*M+u*u+A*A),D?(D=1/D,M*=D,u*=D,A*=D):(M=0,u=0,A=0),t[0]=n,t[1]=M,t[2]=c,t[3]=0,t[4]=a,t[5]=u,t[6]=g,t[7]=0,t[8]=o,t[9]=A,t[10]=l,t[11]=0,t[12]=-(n*N+a*y+o*d),t[13]=-(M*N+u*y+A*d),t[14]=-(c*N+g*y+l*d),t[15]=1,t)},h.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},h.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},"undefined"!=typeof t&&(t.mat4=h);var g={};g.create=function(){var t=new i(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},g.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),i=o.fromValues(0,1,0);return function(s,r,n){var a=o.dot(r,n);return-.999999>a?(o.cross(t,e,r),o.length(t)<1e-6&&o.cross(t,i,r),o.normalize(t,t),g.setAxisAngle(s,t,Math.PI),s):a>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(o.cross(t,r,n),s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=1+a,g.normalize(s,s))}}(),g.setAxes=function(){var t=c.create();return function(e,i,s,r){return t[0]=s[0],t[3]=s[1],t[6]=s[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],g.normalize(e,g.fromMat3(e,t))}}(),g.clone=M.clone,g.fromValues=M.fromValues,g.copy=M.copy,g.set=M.set,g.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},g.setAxisAngle=function(t,e,i){i=.5*i;var s=Math.sin(i);return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=Math.cos(i),t},g.add=M.add,g.multiply=function(t,e,i){var s=e[0],r=e[1],n=e[2],a=e[3],o=i[0],M=i[1],u=i[2],A=i[3];return t[0]=s*A+a*o+r*u-n*M,t[1]=r*A+a*M+n*o-s*u,t[2]=n*A+a*u+s*M-r*o,t[3]=a*A-s*o-r*M-n*u,t},g.mul=g.multiply,g.scale=M.scale,g.rotateX=function(t,e,i){i*=.5;var s=e[0],r=e[1],n=e[2],a=e[3],o=Math.sin(i),M=Math.cos(i);return t[0]=s*M+a*o,t[1]=r*M+n*o,t[2]=n*M-r*o,t[3]=a*M-s*o,t},g.rotateY=function(t,e,i){i*=.5;var s=e[0],r=e[1],n=e[2],a=e[3],o=Math.sin(i),M=Math.cos(i);return t[0]=s*M-n*o,t[1]=r*M+a*o,t[2]=n*M+s*o,t[3]=a*M-r*o,t},g.rotateZ=function(t,e,i){i*=.5;var s=e[0],r=e[1],n=e[2],a=e[3],o=Math.sin(i),M=Math.cos(i);return t[0]=s*M+r*o,t[1]=r*M-s*o,t[2]=n*M+a*o,t[3]=a*M-n*o,t},g.calculateW=function(t,e){var i=e[0],s=e[1],r=e[2];return t[0]=i,t[1]=s,t[2]=r,t[3]=Math.sqrt(Math.abs(1-i*i-s*s-r*r)),t},g.dot=M.dot,g.lerp=M.lerp,g.slerp=function(t,e,i,s){var r,n,a,o,M,u=e[0],A=e[1],c=e[2],h=e[3],g=i[0],l=i[1],D=i[2],N=i[3];return n=u*g+A*l+c*D+h*N,0>n&&(n=-n,g=-g,l=-l,D=-D,N=-N),1-n>1e-6?(r=Math.acos(n),a=Math.sin(r),o=Math.sin((1-s)*r)/a,M=Math.sin(s*r)/a):(o=1-s,M=s),t[0]=o*u+M*g,t[1]=o*A+M*l,t[2]=o*c+M*D,t[3]=o*h+M*N,t},g.invert=function(t,e){var i=e[0],s=e[1],r=e[2],n=e[3],a=i*i+s*s+r*r+n*n,o=a?1/a:0;return t[0]=-i*o,t[1]=-s*o,t[2]=-r*o,t[3]=n*o,t},g.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},g.length=M.length,g.len=g.length,g.squaredLength=M.squaredLength,g.sqrLen=g.squaredLength,g.normalize=M.normalize,g.fromMat3=function(t,e){var i,s=e[0]+e[4]+e[8];if(s>0)i=Math.sqrt(s+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var n=(r+1)%3,a=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*n+n]-e[3*a+a]+1),t[r]=.5*i,i=.5/i,t[3]=(e[3*n+a]-e[3*a+n])*i,t[n]=(e[3*n+r]+e[3*r+n])*i,t[a]=(e[3*a+r]+e[3*r+a])*i}return t},g.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.quat=g)}(e.exports)}(this);var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Moe2;!function(t){var e;!function(t){var e=function(){function t(t){this.enableVR=!1,this.danmakuManager=t}return t.prototype.init=function(t){this.canvas=t},t.prototype.resize=function(t,e){this.canvas.width=this.width=t*this.danmakuManager.p,this.canvas.height=this.height=e*this.danmakuManager.p},t.prototype.update=function(t){if(void 0===t&&(t=!1),this.danmakuManager.visible&&0!=this.danmakuManager.opacity&&1!=t){var e=this.danmakuManager.layoutManager;this.clearAll(),this.drawList(e.initialList,e.initialListRange[0],e.initialListRange[1]),this.drawList(e.appendList,e.appendListRange[0],e.appendListRange[1])}},t.prototype.drawList=function(t,e,i){},t.prototype.clearAll=function(){},t.prototype.drawItemBuffer=function(t){},t}();t.Renderer=e;var i=function(t){function e(e){t.call(this,e)}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.ctx=e.getContext("2d")},e.prototype.clearAll=function(){this.ctx.clearRect(0,0,this.width,this.height)},e.prototype.drawList=function(t,e,i){for(var s=this.danmakuManager.drawSettings,r=s.fontSize+s.rowSpace,n=e;i>=n;n++){var a=t[n];a&&a.buffer&&this.ctx.drawImage(a.buffer,a.left,a.row*r*s.p)}},e.prototype.drawItemBuffer=function(t){var e=t.content,i=t.color,s=t.fontSize,r=this.danmakuManager.drawSettings.fontFamily,n=this.danmakuManager.drawSettings.strokeWidth,a=this.danmakuManager.p;t.buffer=document.createElement("canvas");var o=t.buffer.getContext("2d");o.font=s*a+"px "+r;var M=o.measureText(e);t.width=t.buffer.width=M.width+2*a*n*2,t.height=t.buffer.height=Math.floor((1.3*s+2*n)*a),o.lineWidth=n*a,o.font=s*a+"px "+r,o.fillStyle=i;var u=Number("0x"+i.substr(1,2))+Number("0x"+i.substr(3,2))+Number("0x"+i.substr(5,2));o.shadowColor=u>500?"#000000":"#FFFFFF",o.shadowBlur=n*a,o.fillText(e,n*a,t.height-n*a-.3*s)},e}(e);t.Canvas2DRender=i;var s=function(t){function e(e){t.call(this,e),this.texPosStart=0,this.texPosEnd=0,this.aspect=1,this.vrFBuffers=[],this.vrTextures=[],this.mvpMat=mat4.create(),this.modelMat=mat4.create(),this.viewMat=mat4.create(),this.perspectiveMat=mat4.create(),this.eyePosition=new Float32Array([0,0,2.5]),this.eyePositionStart=new Float32Array([0,0]),this.distance=.8,this.rotate=new Float32Array([0,0]),this.center=new Float32Array([0,0,0]),this.updir=new Float32Array([0,1,0]),this.fov=30,this.near=1,this.far=100,this.mouseDown=!1,this.downPosX=0,this.downPosY=0,this.__enableVR=!1,this.vrEyeParams=[],this.btnupdown=!1,this.btndowndown=!1,this.btnleftdown=!1,this.btnrightdown=!1,this.textureIsActive=!1,this.drawCount=0}return __extends(e,t),e.prototype.init=function(e,i,s){void 0===i&&(i=400),void 0===s&&(s=!0),t.prototype.init.call(this,e),this.gl=e.getContext("webgl"),this.tmpcanvas=document.createElement("canvas"),this.tmpCtx=this.tmpcanvas.getContext("2d"),this.texture=this.gl.createTexture(),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,4096,4096,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);var r=document.createElement("img");this.logoTexture=this.gl.createTexture(),r.onload=function(){this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.logoTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r)}.bind(this),r.src="images/videologo.png";var n="\n                    attribute vec3 pos;\n                    attribute float texpos;\n                    varying vec2 uvCoord;\n                    uniform mat4 mvpMat;\n                    void main(){\n                        vec4 position=vec4(pos,1.0);\n                        position=mvpMat*position;\n                        gl_Position=position;\n                        uvCoord=vec2(fract(texpos),floor(mod(texpos,128.0))/128.0);\n                    }\n                ",a="\n                    precision mediump float;\n                    varying vec2 uvCoord;\n                    uniform sampler2D texture;\n                    void main(){\n                        vec4 color=texture2D(texture,uvCoord);\n                        gl_FragColor=color;\n                    }\n                ";if(this.program=getProgramByShaderSource(this.gl,n,a),this.posArray=new Float32Array(6*i*3),this.texposArray=new Float32Array(6*i*2),this.posVBO=getVBO(this.gl,this.posArray),this.texposVBO=getVBO(this.gl,this.texposArray),this.posAL=this.gl.getAttribLocation(this.program,"pos"),this.texposAL=this.gl.getAttribLocation(this.program,"texpos"),this.textureUL=this.gl.getUniformLocation(this.program,"texture"),this.mvpMatUL=this.gl.getUniformLocation(this.program,"mvpMat"),this.videoRender=s,s){this.canvas.style.background="black",this.videoEl=this.danmakuManager.player.videoEl;var o="\n                        attribute vec3 pos;\n                        attribute vec2 uv;\n                        uniform mat4 mvpMat;\n                        varying vec2 uvCoord;\n                        void main(){\n                            vec4 position=vec4(pos,1.0);\n                            position=mvpMat*position;\n                        gl_Position=position;\n                        uvCoord=uv;\n                        }\n                    ",M="\n                    precision mediump float;\n                    varying vec2 uvCoord;\n                    uniform sampler2D texture;\n                    uniform sampler2D logoTexture;\n                    void main(){\n                       if(gl_FrontFacing)\n                    {\n                        vec4 color=texture2D(logoTexture,uvCoord);\n                        gl_FragColor=color;\n                    }else{\n                        vec4 color=texture2D(texture,uvCoord);\n                        gl_FragColor=color;\n                        }\n                    }\n                    ";
this.videoProgram=getProgramByShaderSource(this.gl,o,M),this.videoPosAL=this.gl.getAttribLocation(this.videoProgram,"pos"),this.videoUvAL=this.gl.getAttribLocation(this.videoProgram,"uv"),this.videoMvpMatUL=this.gl.getUniformLocation(this.videoProgram,"mvpMat"),this.videoTexUL=this.gl.getUniformLocation(this.videoProgram,"texture"),this.logoTextureUL=this.gl.getUniformLocation(this.videoProgram,"logoTexture");var u=this,A=function(t){u.vrFBuffers[t]=u.gl.createFramebuffer(),u.gl.bindFramebuffer(u.gl.FRAMEBUFFER,u.vrFBuffers[t]),u.vrTextures[t]=u.gl.createTexture(),u.gl.bindTexture(u.gl.TEXTURE_2D,u.vrTextures[t]),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),u.gl.texImage2D(u.gl.TEXTURE_2D,0,u.gl.RGBA,1024,1024,0,u.gl.RGBA,u.gl.UNSIGNED_BYTE,null),u.gl.framebufferTexture2D(u.gl.FRAMEBUFFER,u.gl.COLOR_ATTACHMENT0,u.gl.TEXTURE_2D,u.vrTextures[t],0)}.bind(this);A(0),A(1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.videoEl.addEventListener("loadedmetadata",function(){this.videoTex=this.gl.createTexture(),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.videoTex),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.videoEl.videoWidth,this.videoEl.videoHeight,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.videoHeight=this.videoEl.videoHeight,this.videoWidth=this.videoEl.videoWidth;var t=this.videoEl.videoHeight/this.videoEl.videoWidth;this.videoPosVBO=getVBO(this.gl,new Float32Array([-1,t,0,1,t,0,1,-t,0,-1,t,0,1,-t,0,-1,-t,0])),this.videoUvVBO=getVBO(this.gl,new Float32Array([0,0,1,0,1,1,0,0,1,1,0,1])),this.videoReady=!0}.bind(this)),this.danmakuManager.player.containerEl.addEventListener("mousedown",function(t){t.stopPropagation(),this.mouseDown=!0,this.downPosX=t.screenX,this.downPosY=t.screenY,vec2.copy(this.eyePositionStart,this.rotate)}.bind(this),!1),window.addEventListener("mousemove",function(t){this.mouseDown&&(this.rotate[0]=-.003*(t.screenX-this.downPosX)+this.eyePositionStart[0],this.rotate[1]=-.003*(t.screenY-this.downPosY)+this.eyePositionStart[1])}.bind(this),!0),window.addEventListener("mouseup",function(t){this.mouseDown&&(this.mouseDown=!1)}.bind(this),!0),this.danmakuManager.player.containerEl.addEventListener("mousewheel",function(t){t.preventDefault(),(t.wheelDelta||t.detail)>0?this.fov/=1+.4*Math.abs(t.wheelDelta/120||t.detail/3):this.fov*=1+.4*Math.abs(t.wheelDelta/120||t.detail/3),this.fov=Math.max(10,Math.min(80,this.fov))}.bind(this))}var n="\n                    attribute vec2 pos;\n                    uniform float index;\n                    varying vec2 uvCoord;\n                    void main(){\n                        vec2 tempPos=pos;\n\n                        uvCoord=(tempPos+vec2(1.0,1.0))*0.5;\n\n                        if(index==1.0){\n                            tempPos.x=tempPos.x*0.5-0.5;\n                        }else{\n                            tempPos.x=-tempPos.x;\n                            tempPos.x=tempPos.x*0.5+0.5;\n                            uvCoord.x=1.0-uvCoord.x;\n                        }\n                        gl_Position=vec4(tempPos,0.0,1.0);\n                    }\n                ",a="\n                    precision mediump float;\n                    varying vec2 uvCoord;\n                    uniform sampler2D texture;\n                    void main(){\n                        gl_FragColor=texture2D(texture,uvCoord);\n                    }\n                ";this.vrProgram=getProgramByShaderSource(this.gl,n,a),this.vrPosAL=this.gl.getAttribLocation(this.vrProgram,"pos"),this.vrIndexUL=this.gl.getUniformLocation(this.vrProgram,"index"),this.vrTexUL=this.gl.getUniformLocation(this.vrProgram,"texture")},Object.defineProperty(e.prototype,"enableVR",{get:function(){return this.__enableVR},set:function(t){1==t&&this.initVR(),this.__enableVR=t},enumerable:!0,configurable:!0}),e.prototype.initVR=function(){var t=this;window.test=this,this.vrDev||navigator.getVRDisplays().then(function(e){t.vrDev=e[0],t.vrEyeParams[0]=t.vrDev.getEyeParameters("left"),t.vrEyeParams[1]=t.vrDev.getEyeParameters("right");var i=t.vrEyeParams[0].fieldOfView,s=-i.rightDegrees/i.leftDegrees,r=1,n=i.downDegrees/i.upDegrees,a=-1;t.vrPosVbo=getVBO(t.gl,[s,n,r,n,r,a,s,n,r,a,s,a]),t.vrPosVbo=getVBO(t.gl,[-1,1,1,1,1,-1,-1,1,1,-1,-1,-1])})},e.prototype.updatePos=function(){var t=new Float32Array([0,0,.01]),e=vec3.len(t);vec3.rotateY(t,t,this.center,this.rotate[0]),vec3.rotateX(t,t,this.center,this.rotate[1]),this.btnupdown&&vec3.sub(this.eyePosition,this.eyePosition,t),this.btndowndown&&vec3.add(this.eyePosition,this.eyePosition,t),this.btnleftdown&&vec3.add(this.eyePosition,this.eyePosition,[e*-Math.cos(this.rotate[0]),0,e*Math.sin(this.rotate[1])]),this.btnrightdown&&vec3.sub(this.eyePosition,this.eyePosition,[e*-Math.cos(this.rotate[0]),0,e*Math.sin(this.rotate[1])])},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.gl.viewport(0,0,this.width,this.height),this.width=e,this.height=i,this.aspect=this.width/this.height},e.prototype.updateMvp=function(){mat4.lookAt(this.viewMat,this.eyePosition,this.center,this.updir),mat4.perspective(this.perspectiveMat,3.14159*this.fov/180,this.aspect,this.near,this.far),mat4.identity(this.modelMat),mat4.rotateY(this.modelMat,this.modelMat,this.rotate[0]),mat4.rotateX(this.modelMat,this.modelMat,this.rotate[1]),mat4.multiply(this.mvpMat,this.perspectiveMat,this.viewMat),mat4.multiply(this.mvpMat,this.mvpMat,this.modelMat)},e.prototype.updateVrMVP=function(t){var e=vec3.create();vec3.subtract(e,e,this.vrEyeParams[t].offset);var i=mat4.create();mat4.translate(i,i,e);var s=mat4.create();mat4.fromQuat(s,this.vrDev.getPose().orientation),mat4.mul(i,s,i),mat4.invert(i,i);var r=80;mat4.perspective(this.perspectiveMat,3.14159*r/180,1,.04,100),mat4.multiply(this.mvpMat,this.perspectiveMat,i);var n=mat4.create();mat4.translate(n,n,[-1,0,0]),mat4.rotateY(n,n,1.5707963),mat4.scale(n,n,vec3.fromValues(.7,.7,.7)),mat4.multiply(this.mvpMat,this.mvpMat,n)},e.prototype.bindVR=function(t){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.vrFBuffers[t]),this.gl.viewport(0,0,1024,1024),this.updateVrMVP(t)},e.prototype.renderVideo=function(){this.gl.uniformMatrix4fv(this.videoMvpMatUL,!1,this.mvpMat),this.gl.depthMask(!0),this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.LEQUAL),this.gl.drawArrays(this.gl.TRIANGLES,0,6)},e.prototype.renderDanmaku=function(){this.gl.uniformMatrix4fv(this.mvpMatUL,!1,this.mvpMat),this.gl.depthMask(!1),this.gl.drawArrays(this.gl.TRIANGLES,0,6*this.drawCount)},e.prototype.renderVR=function(){this.gl.useProgram(this.vrProgram),this.gl.viewport(0,0,this.width*this.danmakuManager.p,this.height*this.danmakuManager.p),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vrPosVbo),this.gl.enableVertexAttribArray(this.vrPosAL),this.gl.vertexAttribPointer(this.vrPosVbo,2,this.gl.FLOAT,!1,0,0),this.gl.uniform1i(this.vrTexUL,0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.vrTextures[0]),this.gl.uniform1f(this.vrIndexUL,0),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.bindTexture(this.gl.TEXTURE_2D,this.vrTextures[1]),this.gl.uniform1f(this.vrIndexUL,1),this.gl.drawArrays(this.gl.TRIANGLES,0,6)},e.prototype.update=function(){if(this.enableVR||this.updateMvp(),this.videoReady&&(this.gl.useProgram(this.videoProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.depthMask(!0),this.gl.disable(this.gl.DEPTH_TEST),this.gl.disable(this.gl.BLEND),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.videoTex),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.videoEl),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.logoTexture),this.gl.uniform1i(this.logoTextureUL,1),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.videoPosVBO),this.gl.enableVertexAttribArray(this.videoPosAL),this.gl.vertexAttribPointer(this.videoPosAL,3,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.videoUvVBO),this.gl.enableVertexAttribArray(this.videoUvAL),this.gl.vertexAttribPointer(this.videoUvAL,2,this.gl.FLOAT,!1,0,0),this.gl.uniform1i(this.videoTexUL,0),this.enableVR&&this.vrDev?(this.bindVR(0),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.renderVideo(),this.bindVR(1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.renderVideo()):this.renderVideo()),this.danmakuManager.visible&&0!=this.danmakuManager.opacity){var t=this.danmakuManager.layoutManager;this.activeTexture(),this.texPosStart=Number.MAX_VALUE;var e=t.initialList.slice(t.initialListRange[0],t.initialListRange[1]).concat(t.appendList.slice(t.appendListRange[0],t.appendListRange[1]));this.videoReady&&e.sort(function(t,e){return t.zpos-e.zpos}),this.drawList(e),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.posVBO),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.posArray,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(this.posAL),this.gl.vertexAttribPointer(this.posAL,3,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.texposVBO),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.texposArray,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(this.texposAL),this.gl.vertexAttribPointer(this.texposAL,1,this.gl.FLOAT,!1,0,0),this.enableVR&&this.vrDev?(this.bindVR(0),this.renderDanmaku(),this.bindVR(1),this.renderDanmaku(),this.renderVR()):this.renderDanmaku(),this.drawCount=0,this.textureIsActive=!1}},e.prototype.activeTexture=function(){this.textureIsActive||(this.gl.useProgram(this.program),this.gl.enable(this.gl.BLEND),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.uniform1i(this.textureUL,0))},e.prototype.drawItemBuffer=function(t){if(!(this.texPosStart-this.texPosEnd>127)){this.activeTexture();var e=t.content,i=t.color,s=t.fontSize,r=this.danmakuManager.drawSettings.fontFamily,n=this.danmakuManager.drawSettings.strokeWidth,a=this.danmakuManager.p,o=this.tmpCtx;o.font="25px "+r;var M=o.measureText(e);t.width=this.tmpcanvas.width=M.width+2*n*2+10;var u=t.width/4096;if(t.width*=a,!(u>=1)){t.height=32,this.tmpcanvas.height=32,o.lineWidth=n,o.font="25px "+r,o.fillStyle=i;var A=Number("0x"+i.substr(1,2))+Number("0x"+i.substr(3,2))+Number("0x"+i.substr(5,2));o.shadowColor=A>500?"#000000":"#FFFFFF",o.shadowBlur=n,o.clearRect(0,0,this.tmpcanvas.width,this.tmpcanvas.height),o.fillText(e,n+3,t.height-n-.3*s+1);var c=this.texPosEnd%1,h=Math.floor(this.texPosEnd%128);1>=u+c?(this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,Math.floor(4096*c),32*h,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.tmpcanvas),t.texposStart=this.texPosEnd,this.texPosEnd+=u,t.texposEnd=this.texPosEnd):(h+=1,c=0,this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,Math.floor(4096*c),32*h,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.tmpcanvas),t.texposStart=Math.ceil(this.texPosEnd),t.texposEnd=this.texPosEnd=t.texposStart+u),t.buffer=!0,t.zpos=this.__enableVR?2*Math.random():Math.random()}}},e.prototype.drawList=function(t){for(var e=this.posArray,i=this.texposArray,s=this.width,r=(this.height,this.danmakuManager.drawSettings),n=r.fontSize+r.rowSpace,a=(this.aspect,this.videoWidth/this.videoHeight),o=s/a,M=r.p,u=0;u<=t.length;u++){var A=t[u];if(A){var c=18*this.drawCount;e[c]=A.left/M/s*2-1,e[c+1]=1/a-(A.row+.5)*n/2/o*2.5,e[c+3]=(A.left/M+A.width/M)/s*2-1,e[c+4]=e[c+1],e[c+6]=e[c+3],e[c+7]=e[c+1]+A.height/o*1.15,e[c+9]=e[c],e[c+10]=e[c+1],e[c+12]=e[c+6],e[c+13]=e[c+7],e[c+15]=e[c],e[c+16]=e[c+7],e[c+2]=e[c+5]=e[c+8]=e[c+11]=e[c+14]=e[c+17]=.5*A.zpos,c=6*this.drawCount,i[c]=A.texposStart+1+3/4096,i[c+1]=A.texposEnd+1-3/4096,i[c+2]=A.texposEnd-3/4096,i[c+3]=i[c],i[c+4]=i[c+2],i[c+5]=A.texposStart+3/4096,this.drawCount++,this.texPosStart=Math.min(A.texposStart,this.texPosStart)}}},e}(e);t.WebglRender=s}(e=t.Danmaku||(t.Danmaku={}))}(Moe2||(Moe2={})),function t(e,i,s){function r(a,o){if(!i[a]){if(!e[a]){var M="function"==typeof require&&require;if(!o&&M)return M(a,!0);if(n)return n(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var A=i[a]={exports:{}};e[a][0].call(A.exports,function(t){var i=e[a][1][t];return r(i?i:t)},A,A.exports,t,e,i,s)}return i[a].exports}for(var n="function"==typeof require&&require,a=0;a<s.length;a++)r(s[a]);return r}({1:[function(t,e,i){(function(i,s){(function(){"use strict";function r(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function a(t){V=t}function o(t){H=t}function M(){return function(){i.nextTick(g)}}function u(){return function(){G(g)}}function A(){var t=0,e=new K(g),i=document.createTextNode("");return e.observe(i,{characterData:!0}),function(){i.data=t=++t%2}}function c(){var t=new MessageChannel;return t.port1.onmessage=g,function(){t.port2.postMessage(0)}}function h(){return function(){setTimeout(g,1)}}function g(){for(var t=0;X>t;t+=2){var e=et[t],i=et[t+1];e(i),et[t]=void 0,et[t+1]=void 0}X=0}function l(){try{var e=t,i=e("vertx");return G=i.runOnLoop||i.runOnContext,u()}catch(s){return h()}}function D(t,e){var i=this,s=i._state;if(s===nt&&!t||s===at&&!e)return this;var r=new this.constructor(y),n=i._result;if(s){var a=arguments[s-1];H(function(){S(s,r,a,n)})}else m(i,r,t,e);return r}function N(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var i=new e(y);return f(i,t),i}function y(){}function d(){return new TypeError("You cannot resolve a promise with itself")}function L(){return new TypeError("A promises callback cannot return that same promise.")}function T(t){try{return t.then}catch(e){return ot.error=e,ot}}function E(t,e,i,s){try{t.call(e,i,s)}catch(r){return r}}function j(t,e,i){H(function(t){var s=!1,r=E(i,e,function(i){s||(s=!0,e!==i?f(t,i):x(t,i))},function(e){s||(s=!0,z(t,e))},"Settle: "+(t._label||" unknown promise"));!s&&r&&(s=!0,z(t,r))},t)}function I(t,e){e._state===nt?x(t,e._result):e._state===at?z(t,e._result):m(e,void 0,function(e){f(t,e)},function(e){z(t,e)})}function w(t,e,i){e.constructor===t.constructor&&i===it&&constructor.resolve===st?I(t,e):i===ot?z(t,ot.error):void 0===i?x(t,e):n(i)?j(t,e,i):x(t,e)}function f(t,e){t===e?z(t,d()):r(e)?w(t,e,T(e)):x(t,e)}function p(t){t._onerror&&t._onerror(t._result),C(t)}function x(t,e){t._state===rt&&(t._result=e,t._state=nt,0!==t._subscribers.length&&H(C,t))}function z(t,e){t._state===rt&&(t._state=at,t._result=e,H(p,t))}function m(t,e,i,s){var r=t._subscribers,n=r.length;t._onerror=null,r[n]=e,r[n+nt]=i,r[n+at]=s,0===n&&t._state&&H(C,t)}function C(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var s,r,n=t._result,a=0;a<e.length;a+=3)s=e[a],r=e[a+i],s?S(i,s,r,n):r(n);t._subscribers.length=0}}function O(){this.error=null}function v(t,e){try{return t(e)}catch(i){return Mt.error=i,Mt}}function S(t,e,i,s){var r,a,o,M,u=n(i);if(u){if(r=v(i,s),r===Mt?(M=!0,a=r.error,r=null):o=!0,e===r)return void z(e,L())}else r=s,o=!0;e._state!==rt||(u&&o?f(e,r):M?z(e,a):t===nt?x(e,r):t===at&&z(e,r))}function k(t,e){try{e(function(e){f(t,e)},function(e){z(t,e)})}catch(i){z(t,i)}}function Q(t){return new lt(this,t).promise}function b(t){function e(t){f(r,t)}function i(t){z(r,t)}var s=this,r=new s(y);if(!Z(t))return z(r,new TypeError("You must pass an array to race.")),r;for(var n=t.length,a=0;r._state===rt&&n>a;a++)m(s.resolve(t[a]),void 0,e,i);return r}function U(t){var e=this,i=new e(y);return z(i,t),i}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function _(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Y(t){this._id=ht++,this._state=void 0,this._result=void 0,this._subscribers=[],y!==t&&("function"!=typeof t&&B(),this instanceof Y?k(this,t):_())}function R(t,e){this._instanceConstructor=t,this.promise=new t(y),Array.isArray(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&x(this.promise,this._result))):z(this.promise,this._validationError())}function P(){var t;if("undefined"!=typeof s)t=s;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=t.Promise;i&&"[object Promise]"===Object.prototype.toString.call(i.resolve())&&!i.cast||(t.Promise=gt)}var F;F=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var G,V,W,Z=F,X=0,H=function(t,e){et[X]=t,et[X+1]=e,X+=2,2===X&&(V?V(g):W())},q="undefined"!=typeof window?window:void 0,J=q||{},K=J.MutationObserver||J.WebKitMutationObserver,$="undefined"!=typeof i&&"[object process]"==={}.toString.call(i),tt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,et=new Array(1e3);W=$?M():K?A():tt?c():void 0===q&&"function"==typeof t?l():h();var it=D,st=N,rt=void 0,nt=1,at=2,ot=new O,Mt=new O,ut=Q,At=b,ct=U,ht=0,gt=Y;Y.all=ut,Y.race=At,Y.resolve=st,Y.reject=ct,Y._setScheduler=a,Y._setAsap=o,Y._asap=H,Y.prototype={constructor:Y,then:it,"catch":function(t){return this.then(null,t)}};var lt=R;R.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},R.prototype._enumerate=function(){for(var t=this.length,e=this._input,i=0;this._state===rt&&t>i;i++)this._eachEntry(e[i],i)},R.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,s=i.resolve;if(s===st){var r=T(t);if(r===it&&t._state!==rt)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(i===gt){var n=new i(y);w(n,t,r),this._willSettleAt(n,e)}else this._willSettleAt(new i(function(e){e(t)}),e)}else this._willSettleAt(s(t),e)},R.prototype._settledAt=function(t,e,i){var s=this.promise;s._state===rt&&(this._remaining--,t===at?z(s,i):this._result[e]=i),0===this._remaining&&x(s,this._result)},R.prototype._willSettleAt=function(t,e){var i=this;m(t,void 0,function(t){i._settledAt(nt,e,t)},function(t){i._settledAt(at,e,t)})};var Dt=P,Nt={Promise:gt,polyfill:Dt};"function"==typeof define&&define.amd?define(function(){return Nt}):"undefined"!=typeof e&&e.exports?e.exports=Nt:"undefined"!=typeof this&&(this.ES6Promise=Nt),Dt()}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:26}],2:[function(t,e,i){function s(){this.displayId=u++,this.displayName="webvr-polyfill displayName",this.isConnected=!0,this.isPresenting=!1,this.capabilities={hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1},this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,this.wakelock_=new M}function r(){this.hardwareUnitId="webvr-polyfill hardwareUnitId",this.deviceId="webvr-polyfill deviceId",this.deviceName="webvr-polyfill deviceName"}function n(){}function a(){}var o=t("./util.js"),M=t("./wakelock.js"),u=1e3;s.prototype.getPose=function(){return this.getImmediatePose()},s.prototype.requestAnimationFrame=function(t){return window.requestAnimationFrame(t)},s.prototype.cancelAnimationFrame=function(t){return window.cancelAnimationFrame(t)},s.prototype.wrapForFullscreen=function(t){if(o.isIOS())return t;if(this.fullscreenWrapper_||(this.fullscreenWrapper_=document.createElement("div"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper"),this.fullscreenWrapper_.style.width="100%",this.fullscreenWrapper_.style.height="100%"),this.fullscreenElement_==t)return this.fullscreenWrapper_;this.removeFullscreenWrapper(),this.fullscreenElement_=t;var e=this.fullscreenElement_.parentElement;return e.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),e.removeChild(this.fullscreenElement_),this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenWrapper_},s.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var t=this.fullscreenElement_;this.fullscreenElement_=null;var e=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(t),e.insertBefore(t,this.fullscreenWrapper_),e.removeChild(this.fullscreenWrapper_),t}},s.prototype.requestPresent=function(t){var e=this;return this.layer_=t,new Promise(function(i,s){function r(){var t=o.getFullscreenElement();e.isPresenting=a===t,e.fireVRDisplayPresentChange_(),e.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary"),e.waitingForPresent_=!1,e.beginPresent_(),i()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.removeFullscreenWrapper(),e.wakelock_.release(),e.endPresent_(),e.removeFullscreenListeners_())}function n(){e.waitingForPresent_&&(e.removeFullscreenWrapper(),e.removeFullscreenListeners_(),e.wakelock_.release(),e.waitingForPresent_=!1,e.isPresenting=!1,s(new Error("Unable to present.")))}if(!e.capabilities.canPresent)return void s(new Error("VRDisplay is not capable of presenting."));if(e.waitingForPresent_=!1,t&&t.source){var a=e.wrapForFullscreen(t.source);e.addFullscreenListeners_(a,r,n),o.requestFullscreen(a)?(e.wakelock_.request(),e.waitingForPresent_=!0):o.isIOS()&&(e.wakelock_.request(),e.isPresenting=!0,e.fireVRDisplayPresentChange_(),e.beginPresent_(),i())}e.waitingForPresent_||o.isIOS()||(o.exitFullscreen(),s(new Error("Unable to present.")))})},s.prototype.exitPresent=function(){var t=this.isPresenting,e=this;return this.isPresenting=!1,this.layer_=null,this.wakelock_.release(),new Promise(function(i,s){t?(!o.exitFullscreen()&&o.isIOS()&&e.endPresent_(),e.removeFullscreenWrapper(),i()):s(new Error("Was not presenting to VRDisplay."))})},s.prototype.getLayers=function(){return this.layer_?[this.layer_]:null},s.prototype.fireVRDisplayPresentChange_=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{vrdisplay:this}});window.dispatchEvent(t)},s.prototype.addFullscreenListeners_=function(t,e,i){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=t,this.fullscreenChangeHandler_=e,this.fullscreenErrorHandler_=i,e&&(t.addEventListener("fullscreenchange",e,!1),t.addEventListener("webkitfullscreenchange",e,!1),document.addEventListener("mozfullscreenchange",e,!1),t.addEventListener("msfullscreenchange",e,!1)),i&&(t.addEventListener("fullscreenerror",i,!1),t.addEventListener("webkitfullscreenerror",i,!1),document.addEventListener("mozfullscreenerror",i,!1),t.addEventListener("msfullscreenerror",i,!1))},s.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var t=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var e=this.fullscreenChangeHandler_;t.removeEventListener("fullscreenchange",e,!1),t.removeEventListener("webkitfullscreenchange",e,!1),document.removeEventListener("mozfullscreenchange",e,!1),t.removeEventListener("msfullscreenchange",e,!1)}if(this.fullscreenErrorHandler_){var i=this.fullscreenErrorHandler_;t.removeEventListener("fullscreenerror",i,!1),t.removeEventListener("webkitfullscreenerror",i,!1),document.removeEventListener("mozfullscreenerror",i,!1),t.removeEventListener("msfullscreenerror",i,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},s.prototype.beginPresent_=function(){},s.prototype.endPresent_=function(){},s.prototype.submitFrame=function(t){},s.prototype.getEyeParameters=function(t){return null},n.prototype=new r,a.prototype=new r,e.exports.VRDisplay=s,e.exports.VRDevice=r,e.exports.HMDVRDevice=n,e.exports.PositionSensorVRDevice=a},{"./util.js":22,"./wakelock.js":24}],3:[function(t,e,i){function s(t){this.gl=t,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferScale=WebVRConfig.BUFFER_SCALE?WebVRConfig.BUFFER_SCALE:1,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,this.realCanvasWidth=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"height"),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=n.linkProgram(t,o,M,this.attribs),this.uniforms=n.getProgramUniforms(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize(),this.cardboardUI=new r(t)}var r=t("./cardboard-ui.js"),n=t("./util.js"),a=t("./deps/wglu-preserve-state.js"),o=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),M=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");s.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI.destroy()},s.prototype.onResize=function(){var t=this.gl,e=this,i=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];a(t,i,function(t){e.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),e.scissorTest&&e.realDisable.call(t,t.SCISSOR_TEST),e.realColorMask.call(t,!0,!0,!0,!0),e.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.framebuffer),t.bindTexture(t.TEXTURE_2D,e.renderTarget),t.texImage2D(t.TEXTURE_2D,0,e.ctxAttribs.alpha?t.RGBA:t.RGB,e.bufferWidth,e.bufferHeight,0,e.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.renderTarget,0),e.ctxAttribs.depth&&e.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,e.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e.depthStencilBuffer)):e.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,e.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e.depthBuffer)):e.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,e.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,e.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.lastBoundFramebuffer),e.scissorTest&&e.realEnable.call(t,t.SCISSOR_TEST),e.realColorMask.apply(t,e.colorMask),e.realViewport.apply(t,e.viewport),e.realClearColor.apply(t,e.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},s.prototype.patch=function(){if(!this.isPatched){var t=this,e=this.gl.canvas,i=this.gl;e.width=n.getScreenWidth()*this.bufferScale,e.height=n.getScreenHeight()*this.bufferScale,Object.defineProperty(e,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(e){t.bufferWidth=e,t.onResize()}}),Object.defineProperty(e,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(e){t.bufferHeight=e,t.onResize()}}),this.lastBoundFramebuffer=i.getParameter(i.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(i.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(e,s){t.lastBoundFramebuffer=s?s:t.framebuffer,t.realBindFramebuffer.call(i,e,t.lastBoundFramebuffer)},this.cullFace=i.getParameter(i.CULL_FACE),this.depthTest=i.getParameter(i.DEPTH_TEST),this.blend=i.getParameter(i.BLEND),this.scissorTest=i.getParameter(i.SCISSOR_TEST),this.stencilTest=i.getParameter(i.STENCIL_TEST),i.enable=function(e){switch(e){case i.CULL_FACE:t.cullFace=!0;break;case i.DEPTH_TEST:t.depthTest=!0;break;case i.BLEND:t.blend=!0;break;case i.SCISSOR_TEST:t.scissorTest=!0;break;case i.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(i,e)},i.disable=function(e){switch(e){case i.CULL_FACE:t.cullFace=!1;break;case i.DEPTH_TEST:t.depthTest=!1;break;case i.BLEND:t.blend=!1;break;case i.SCISSOR_TEST:t.scissorTest=!1;break;case i.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(i,e)},this.colorMask=i.getParameter(i.COLOR_WRITEMASK),i.colorMask=function(e,s,r,n){t.colorMask[0]=e,t.colorMask[1]=s,t.colorMask[2]=r,t.colorMask[3]=n,t.realColorMask.call(i,e,s,r,n)},this.clearColor=i.getParameter(i.COLOR_CLEAR_VALUE),i.clearColor=function(e,s,r,n){t.clearColor[0]=e,t.clearColor[1]=s,t.clearColor[2]=r,t.clearColor[3]=n,t.realClearColor.call(i,e,s,r,n)},this.viewport=i.getParameter(i.VIEWPORT),i.viewport=function(e,s,r,n){t.viewport[0]=e,t.viewport[1]=s,t.viewport[2]=r,t.viewport[3]=n,t.realViewport.call(i,e,s,r,n)},this.isPatched=!0}},s.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,e=this.gl.canvas;Object.defineProperty(e,"width",this.realCanvasWidth),Object.defineProperty(e,"height",this.realCanvasHeight),e.width=this.bufferWidth,e.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1}},s.prototype.setTextureBounds=function(t,e){t||(t=[0,0,.5,1]),e||(e=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=e[0],this.viewportOffsetScale[5]=e[1],this.viewportOffsetScale[6]=e[2],this.viewportOffsetScale[7]=e[3];
},s.prototype.submitFrame=function(){var t=this.gl,e=this,i=[];WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||i.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),a(t,i,function(t){e.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),e.cullFace&&e.realDisable.call(t,t.CULL_FACE),e.depthTest&&e.realDisable.call(t,t.DEPTH_TEST),e.blend&&e.realDisable.call(t,t.BLEND),e.scissorTest&&e.realDisable.call(t,t.SCISSOR_TEST),e.stencilTest&&e.realDisable.call(t,t.STENCIL_TEST),e.realColorMask.call(t,!0,!0,!0,!0),e.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.ctxAttribs.alpha&&(e.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(e.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer),t.enableVertexAttribArray(e.attribs.position),t.enableVertexAttribArray(e.attribs.texCoord),t.vertexAttribPointer(e.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(e.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(e.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,e.renderTarget),t.uniform4fv(e.uniforms.viewportOffsetScale,e.viewportOffsetScale),t.drawElements(t.TRIANGLES,e.indexCount,t.UNSIGNED_SHORT,0),e.cardboardUI.renderNoState(),e.realBindFramebuffer.call(e.gl,t.FRAMEBUFFER,e.framebuffer),e.ctxAttribs.preserveDrawingBuffer||(e.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.lastBoundFramebuffer),e.cullFace&&e.realEnable.call(t,t.CULL_FACE),e.depthTest&&e.realEnable.call(t,t.DEPTH_TEST),e.blend&&e.realEnable.call(t,t.BLEND),e.scissorTest&&e.realEnable.call(t,t.SCISSOR_TEST),e.stencilTest&&e.realEnable.call(t,t.STENCIL_TEST),e.realColorMask.apply(t,e.colorMask),e.realViewport.apply(t,e.viewport),!e.ctxAttribs.alpha&&e.ctxAttribs.preserveDrawingBuffer||e.realClearColor.apply(t,e.clearColor)})},s.prototype.updateDeviceInfo=function(t){var e=this.gl,i=this,s=[e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING];a(e,s,function(e){var s=i.computeMeshVertices_(i.meshWidth,i.meshHeight,t);if(e.bindBuffer(e.ARRAY_BUFFER,i.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),!i.indexCount){var r=i.computeMeshIndices_(i.meshWidth,i.meshHeight);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW),i.indexCount=r.length}})},s.prototype.computeMeshVertices_=function(t,e,i){for(var s=new Float32Array(2*t*e*5),r=i.getLeftEyeVisibleTanAngles(),a=i.getLeftEyeNoLensTanAngles(),o=i.getLeftEyeVisibleScreenRect(a),M=0,u=0;2>u;u++){for(var A=0;e>A;A++)for(var c=0;t>c;c++,M++){var h=c/(t-1),g=A/(e-1),l=h,D=g,N=n.lerp(r[0],r[2],h),y=n.lerp(r[3],r[1],g),d=Math.sqrt(N*N+y*y),L=i.distortion.distortInverse(d),T=N*L/d,E=y*L/d;h=(T-a[0])/(a[2]-a[0]),g=(E-a[3])/(a[1]-a[3]);i.device.widthMeters/i.device.heightMeters;h=2*(o.x+h*o.width-.5),g=2*(o.y+g*o.height-.5),s[5*M+0]=h,s[5*M+1]=g,s[5*M+2]=l,s[5*M+3]=D,s[5*M+4]=u}var j=r[2]-r[0];r[0]=-(j+r[0]),r[2]=j-r[2],j=a[2]-a[0],a[0]=-(j+a[0]),a[2]=j-a[2],o.x=1-(o.x+o.width)}return s},s.prototype.computeMeshIndices_=function(t,e){for(var i=new Uint16Array(2*(t-1)*(e-1)*6),s=t/2,r=e/2,n=0,a=0,o=0;2>o;o++)for(var M=0;e>M;M++)for(var u=0;t>u;u++,n++)0!=u&&0!=M&&(s>=u==r>=M?(i[a++]=n,i[a++]=n-t-1,i[a++]=n-t,i[a++]=n-t-1,i[a++]=n,i[a++]=n-1):(i[a++]=n-1,i[a++]=n-t,i[a++]=n,i[a++]=n-t,i[a++]=n-1,i[a++]=n-t-1));return i},e.exports=s},{"./cardboard-ui.js":4,"./deps/wglu-preserve-state.js":6,"./util.js":22}],4:[function(t,e,i){function s(t){this.gl=t,this.attribs={position:0},this.program=r.linkProgram(t,a,o,this.attribs),this.uniforms=r.getProgramUniforms(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}var r=t("./util.js"),n=t("./deps/wglu-preserve-state.js"),a=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),o=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),M=Math.PI/180,u=60,A=12,c=20,h=1,g=.75,l=.3125,D=4,N=28,y=1.5;s.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},s.prototype.listen=function(t,e){var i=this.gl.canvas;this.listener=function(s){var r=i.clientWidth/2,n=N*y;s.clientX>r-n&&s.clientX<r+n&&s.clientY>i.clientHeight-n?t(s):s.clientX<n&&s.clientY<n&&e(s)},i.addEventListener("click",this.listener,!1)},s.prototype.onResize=function(){var t=this.gl,e=this,i=[t.ARRAY_BUFFER_BINDING];n(t,i,function(t){function i(t,e){var i=(90-t)*M,s=Math.cos(i),a=Math.sin(i);r.push(l*s*L+n,l*a*L+L),r.push(e*s*L+n,e*a*L+L)}function s(e,i){r.push(T+e,t.drawingBufferHeight-T-i)}var r=[],n=t.drawingBufferWidth/2,a=window.devicePixelRatio*(t.drawingBufferWidth/(screen.width*window.devicePixelRatio)),o=D*a/2,d=N*y*a,L=N*a/2,T=(N*y-N)*a;r.push(n-o,d),r.push(n-o,t.drawingBufferHeight),r.push(n+o,d),r.push(n+o,t.drawingBufferHeight),e.gearOffset=r.length/2;for(var E=0;6>=E;E++){var j=E*u;i(j,h),i(j+A,h),i(j+c,g),i(j+(u-c),g),i(j+(u-A),h)}e.gearVertexCount=r.length/2-e.gearOffset,e.arrowOffset=r.length/2;var I=o/Math.sin(45*M);s(0,L),s(L,0),s(L+I,I),s(I,L+I),s(I,L-I),s(0,L),s(L,2*L),s(L+I,2*L-I),s(I,L-I),s(0,L),s(I,L-o),s(N*a,L-o),s(I,L+o),s(N*a,L+o),e.arrowVertexCount=r.length/2-e.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW)})},s.prototype.render=function(){var t=this.gl,e=this,i=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];n(t,i,function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.renderNoState()})},s.prototype.renderNoState=function(){var t=this.gl;t.useProgram(this.program),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.enableVertexAttribArray(this.attribs.position),t.vertexAttribPointer(this.attribs.position,2,t.FLOAT,!1,8,0),t.uniform4f(this.uniforms.color,1,1,1,1),r.orthoMatrix(this.projMat,0,t.drawingBufferWidth,0,t.drawingBufferHeight,.1,1024),t.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.drawArrays(t.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),t.drawArrays(t.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},e.exports=s},{"./deps/wglu-preserve-state.js":6,"./util.js":22}],5:[function(t,e,i){function s(){this.displayName="Cardboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,this.capabilities.canPresent=!0,this.bufferScale_=WebVRConfig.BUFFER_SCALE?WebVRConfig.BUFFER_SCALE:1,this.poseSensor_=new o,this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new a(!0,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new n(this.dpdb_.getDeviceParams()),this.viewerSelector_=new u,this.viewerSelector_.on("change",this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.rotateInstructions_=new M}var r=t("./cardboard-distorter.js"),n=t("./device-info.js"),a=t("./dpdb/dpdb.js"),o=t("./sensor-fusion/fusion-pose-sensor.js"),M=t("./rotate-instructions.js"),u=t("./viewer-selector.js"),A=t("./base.js").VRDisplay,c=t("./util.js"),h={LEFT:"left",RIGHT:"right"};s.prototype=new A,s.prototype.getImmediatePose=function(){return{position:this.poseSensor_.getPosition(),orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},s.prototype.resetPose=function(){this.poseSensor_.resetPose()},s.prototype.getEyeParameters=function(t){var e,i=[.5*this.deviceInfo_.viewer.interLensDistance,0,0];if(t==h.LEFT)i[0]*=-1,e=this.deviceInfo_.getFieldOfViewLeftEye();else{if(t!=h.RIGHT)return console.error("Invalid eye provided: %s",t),null;e=this.deviceInfo_.getFieldOfViewRightEye()}return{fieldOfView:e,offset:i,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_}},s.prototype.onDeviceParamsUpdated_=function(t){console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(t),this.distorter_&&this.distorter.updateDeviceInfo(this.deviceInfo_)},s.prototype.beginPresent_=function(){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2")),t&&(this.layer_.predistorted?this.cardboardUI_=new CardboardUI(t):(this.distorter_=new r(t),this.distorter_.updateDeviceInfo(this.deviceInfo_),this.cardboardUI_=this.distorter_.cardboardUI,(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)),this.cardboardUI_.listen(function(){this.viewerSelector_.show(this.layer_.source.parentElement)}.bind(this),function(){this.exitPresent()}.bind(this)),!c.isLandscapeMode()&&c.isMobile()?this.rotateInstructions_.showTemporarily(3e3,this.fullscreenWrapper_):this.rotateInstructions_.update(),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.fireVRDisplayDeviceParamsChange_())},s.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler)},s.prototype.submitFrame=function(t){this.distorter_?this.distorter_.submitFrame():this.cardboardUI_&&this.cardboardUI_.render()},s.prototype.onOrientationChange_=function(t){console.log("onOrientationChange_"),this.viewerSelector_.hide(),this.rotateInstructions_.update()},s.prototype.onViewerChanged_=function(t){this.deviceInfo_.setViewer(t),this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},s.prototype.fireVRDisplayDeviceParamsChange_=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(t)},e.exports=s},{"./base.js":2,"./cardboard-distorter.js":3,"./device-info.js":7,"./dpdb/dpdb.js":11,"./rotate-instructions.js":15,"./sensor-fusion/fusion-pose-sensor.js":17,"./util.js":22,"./viewer-selector.js":23}],6:[function(t,e,i){function s(t,e,i){if(!e)return void i(t);for(var s=[],r=null,n=0;n<e.length;++n){var a=e[n];switch(a){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:var o=e[++n];if(o<t.TEXTURE0||o>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),s.push(null,null);break}r||(r=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(o),s.push(t.getParameter(a),null);break;case t.ACTIVE_TEXTURE:r=t.getParameter(t.ACTIVE_TEXTURE),s.push(null);break;default:s.push(t.getParameter(a))}}i(t);for(var n=0;n<e.length;++n){var a=e[n],M=s[n];switch(a){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,M);break;case t.COLOR_CLEAR_VALUE:t.clearColor(M[0],M[1],M[2],M[3]);break;case t.COLOR_WRITEMASK:t.colorMask(M[0],M[1],M[2],M[3]);break;case t.CURRENT_PROGRAM:t.useProgram(M);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,M);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,M);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,M);break;case t.TEXTURE_BINDING_2D:var o=e[++n];if(o<t.TEXTURE0||o>t.TEXTURE31)break;t.activeTexture(o),t.bindTexture(t.TEXTURE_2D,M);break;case t.TEXTURE_BINDING_CUBE_MAP:var o=e[++n];if(o<t.TEXTURE0||o>t.TEXTURE31)break;t.activeTexture(o),t.bindTexture(t.TEXTURE_CUBE_MAP,M);break;case t.VIEWPORT:t.viewport(M[0],M[1],M[2],M[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:M?t.enable(a):t.disable(a);break;default:console.log("No GL restore behavior for 0x"+a.toString(16))}r&&t.activeTexture(r)}}e.exports=s},{}],7:[function(t,e,i){function s(t){this.width=t.width||M.getScreenWidth(),this.height=t.height||M.getScreenHeight(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}function r(t){this.viewer=c.CardboardV2,this.updateDeviceParams(t),this.distortion=new a(this.viewer.distortionCoefficients)}function n(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}var a=t("./distortion/distortion.js"),o=t("./three-math.js"),M=t("./util.js"),u=new s({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),A=new s({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),c={CardboardV1:new n({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new n({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};r.prototype.updateDeviceParams=function(t){this.device=this.determineDevice_(t)||this.device},r.prototype.getDevice=function(){return this.device},r.prototype.setViewer=function(t){this.viewer=t,this.distortion=new a(this.viewer.distortionCoefficients)},r.prototype.determineDevice_=function(t){if(!t)return M.isIOS()?(console.warn("Using fallback Android device measurements."),A):(console.warn("Using fallback iOS device measurements."),u);var e=.0254,i=e/t.xdpi,r=e/t.ydpi,n=M.getScreenWidth(),a=M.getScreenHeight();return new s({widthMeters:i*n,heightMeters:r*a,bevelMeters:.001*t.bevelMm})},r.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,e=this.device,i=this.distortion,s=t.screenLensDistance,r=(e.widthMeters-t.interLensDistance)/2,n=t.interLensDistance/2,a=t.baselineLensDistance-e.bevelMeters,M=e.heightMeters-a,u=o.Math.radToDeg(Math.atan(i.distort(r/s))),A=o.Math.radToDeg(Math.atan(i.distort(n/s))),c=o.Math.radToDeg(Math.atan(i.distort(a/s))),h=o.Math.radToDeg(Math.atan(i.distort(M/s)));return{leftDegrees:Math.min(u,t.fov),rightDegrees:Math.min(A,t.fov),downDegrees:Math.min(c,t.fov),upDegrees:Math.min(h,t.fov)}},r.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,e=this.device,i=this.distortion,s=Math.tan(-o.Math.degToRad(t.fov)),r=Math.tan(o.Math.degToRad(t.fov)),n=Math.tan(o.Math.degToRad(t.fov)),a=Math.tan(-o.Math.degToRad(t.fov)),M=e.widthMeters/4,u=e.heightMeters/2,A=t.baselineLensDistance-e.bevelMeters-u,c=t.interLensDistance/2-M,h=-A,g=t.screenLensDistance,l=i.distort((c-M)/g),D=i.distort((h+u)/g),N=i.distort((c+M)/g),y=i.distort((h-u)/g),d=new Float32Array(4);return d[0]=Math.max(s,l),d[1]=Math.min(r,D),d[2]=Math.min(n,N),d[3]=Math.max(a,y),d},r.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,e=this.device,i=this.distortion,s=new Float32Array(4),r=i.distortInverse(Math.tan(-o.Math.degToRad(t.fov))),n=i.distortInverse(Math.tan(o.Math.degToRad(t.fov))),a=i.distortInverse(Math.tan(o.Math.degToRad(t.fov))),M=i.distortInverse(Math.tan(-o.Math.degToRad(t.fov))),u=e.widthMeters/4,A=e.heightMeters/2,c=t.baselineLensDistance-e.bevelMeters-A,h=t.interLensDistance/2-u,g=-c,l=t.screenLensDistance,D=(h-u)/l,N=(g+A)/l,y=(h+u)/l,d=(g-A)/l;return s[0]=Math.max(r,D),s[1]=Math.min(n,N),s[2]=Math.min(a,y),s[3]=Math.max(M,d),s},r.prototype.getLeftEyeVisibleScreenRect=function(t){var e=this.viewer,i=this.device,s=e.screenLensDistance,r=(i.widthMeters-e.interLensDistance)/2,n=e.baselineLensDistance-i.bevelMeters,a=(t[0]*s+r)/i.widthMeters,o=(t[1]*s+n)/i.heightMeters,M=(t[2]*s+r)/i.widthMeters,u=(t[3]*s+n)/i.heightMeters;return{x:a,y:u,width:M-a,height:o-u}},r.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},r.prototype.getFieldOfViewRightEye=function(t){var e=this.getFieldOfViewLeftEye(t);return{leftDegrees:e.rightDegrees,rightDegrees:e.leftDegrees,upDegrees:e.upDegrees,downDegrees:e.downDegrees}},r.prototype.getProjectionMatrixLeftEye=function(t){var e=this.getFieldOfViewLeftEye(t),i=new o.Matrix4,s=.1,r=1e3,n=Math.tan(o.Math.degToRad(e.leftDegrees))*s,a=Math.tan(o.Math.degToRad(e.rightDegrees))*s,M=Math.tan(o.Math.degToRad(e.downDegrees))*s,u=Math.tan(o.Math.degToRad(e.upDegrees))*s;return i.makeFrustum(-n,a,-M,u,s,r),i},r.prototype.getUndistortedViewportLeftEye=function(){var t=this.getUndistortedParams_(),e=this.viewer,i=this.device,s=e.screenLensDistance,r=i.widthMeters/s,n=i.heightMeters/s,a=i.width/r,o=i.height/n,M=Math.round((t.eyePosX-t.outerDist)*a),u=Math.round((t.eyePosY-t.bottomDist)*o);return{x:M,y:u,width:Math.round((t.eyePosX+t.innerDist)*a)-M,height:Math.round((t.eyePosY+t.topDist)*o)-u}},r.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.getUndistortedParams_();return{leftDegrees:o.Math.radToDeg(Math.atan(t.outerDist)),rightDegrees:o.Math.radToDeg(Math.atan(t.innerDist)),downDegrees:o.Math.radToDeg(Math.atan(t.bottomDist)),upDegrees:o.Math.radToDeg(Math.atan(t.topDist))}},r.prototype.getUndistortedParams_=function(){var t=this.viewer,e=this.device,i=this.distortion,s=t.screenLensDistance,r=t.interLensDistance/2/s,n=e.widthMeters/s,a=e.heightMeters/s,M=n/2-r,u=(t.baselineLensDistance-e.bevelMeters)/s,A=t.fov,c=i.distortInverse(Math.tan(o.Math.degToRad(A))),h=Math.min(M,c),g=Math.min(r,c),l=Math.min(u,c),D=Math.min(a-u,c);return{outerDist:h,innerDist:g,topDist:D,bottomDist:l,eyePosX:M,eyePosY:u}},r.Viewers=c,e.exports=r},{"./distortion/distortion.js":9,"./three-math.js":20,"./util.js":22}],8:[function(t,e,i){function s(t){this.display=t,this.hardwareUnitId=t.displayId,this.deviceId="webvr-pollyfill:HMD:"+t.displayId,this.deviceName=t.displayName+" (HMD)"}function r(t){this.display=t,this.hardwareUnitId=t.displayId,this.deviceId="webvr-pollyfill:PositionSensor: "+t.displayId,this.deviceName=t.displayName+" (PositionSensor)"}var n=(t("./base.js").VRDisplay,t("./base.js").HMDVRDevice),a=t("./base.js").PositionSensorVRDevice;s.prototype=new n,s.prototype.getEyeParameters=function(t){var e=this.display.getEyeParameters(t);return{currentFieldOfView:e.fieldOfView,maximumFieldOfView:e.fieldOfView,minimumFieldOfView:e.fieldOfView,recommendedFieldOfView:e.fieldOfView,eyeTranslation:{x:e.offset[0],y:e.offset[1],z:e.offset[2]},renderRect:{x:"right"==t?e.renderWidth:0,y:0,width:e.renderWidth,height:e.renderHeight}}},s.prototype.setFieldOfView=function(t,e,i,s){},r.prototype=new a,r.prototype.getState=function(){var t=this.display.getPose();return{position:t.position?{x:t.position[0],y:t.position[1],z:t.position[2]}:null,orientation:t.orientation?{x:t.orientation[0],y:t.orientation[1],z:t.orientation[2],w:t.orientation[3]}:null,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},r.prototype.resetState=function(){return this.positionDevice.resetPose()},e.exports.VRDisplayHMDDevice=s,e.exports.VRDisplayPositionSensorDevice=r},{"./base.js":2}],9:[function(t,e,i){function s(t){this.coefficients=t}s.prototype.distortInverse=function(t){for(var e=0,i=1,s=t-this.distort(e);Math.abs(i-e)>1e-4;){var r=t-this.distort(i),n=i-r*((i-e)/(r-s));e=i,i=n,s=r}return i},s.prototype.distort=function(t){for(var e=t*t,i=0,s=0;s<this.coefficients.length;s++)i=e*(i+this.coefficients[s]);return(i+1)*t},e.exports=s},{}],10:[function(t,e,i){var s={format:1,last_updated:"2016-01-20T00:18:35Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 "}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 "}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3}]};e.exports=s},{}],11:[function(t,e,i){function s(t,e){if(this.dpdb=n,this.recalculateDeviceParams_(),t){this.onDeviceParamsUpdated=e,console.log("Fetching DPDB...");var i=new XMLHttpRequest,s=this;i.open("GET",o,!0),i.addEventListener("load",function(){s.loading=!1,i.status>=200&&i.status<=299?(console.log("Successfully loaded online DPDB."),s.dpdb=JSON.parse(i.response),s.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),i.send()}}function r(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}var n=t("./dpdb-cache.js"),a=t("../util.js"),o="https://storage.googleapis.com/cardboard-dpdb/dpdb.json";s.prototype.getDeviceParams=function(){return this.deviceParams},s.prototype.recalculateDeviceParams_=function(){console.log("Recalculating device params.");var t=this.calcDeviceParams_();console.log("New device parameters:"),console.log(t),t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},s.prototype.calcDeviceParams_=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var e=navigator.userAgent||navigator.vendor||window.opera,i=a.getScreenWidth(),s=a.getScreenHeight();if(console.log("User agent: "+e),console.log("Pixel width: "+i),console.log("Pixel height: "+s),!t.devices)return console.error("DPDB has no devices section."),null;for(var n=0;n<t.devices.length;n++){var o=t.devices[n];if(o.rules)if("ios"==o.type||"android"==o.type){if(a.isIOS()==("ios"==o.type)){for(var M=!1,u=0;u<o.rules.length;u++){var A=o.rules[u];if(this.matchRule_(A,e,i,s)){console.log("Rule matched:"),console.log(A),M=!0;break}}if(M){var c=o.dpi[0]||o.dpi,h=o.dpi[1]||o.dpi;return new r({xdpi:c,ydpi:h,bevelMm:o.bw})}}}else console.warn("Device["+n+"] has invalid type.");else console.warn("Device["+n+"] has no rules section.")}return console.warn("No DPDB device match."),null},s.prototype.matchRule_=function(t,e,i,s){if(!t.ua&&!t.res)return!1;if(t.ua&&e.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var r=t.res[0],n=t.res[1];if(Math.min(i,s)!=Math.min(r,n)||Math.max(i,s)!=Math.max(r,n))return!1}return!0},e.exports=s},{"../util.js":22,"./dpdb-cache.js":10}],12:[function(t,e,i){function s(){this.callbacks={}}s.prototype.emit=function(t){var e=this.callbacks[t];if(e){var i=[].slice.call(arguments);i.shift();for(var s=0;s<e.length;s++)e[s].apply(this,i)}},s.prototype.on=function(t,e){t in this.callbacks?this.callbacks[t].push(e):this.callbacks[t]=[e]},e.exports=s},{}],13:[function(t,e,i){var s=t("./webvr-polyfill.js");window.WebVRConfig=window.WebVRConfig||{},window.WebVRConfig.DEFER_INITIALIZATION?window.InitializeWebVRPolyfill=function(){new s}:new s},{"./webvr-polyfill.js":25}],14:[function(t,e,i){function s(){this.displayName="Mouse and Keyboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,window.addEventListener("keydown",this.onKeyDown_.bind(this)),window.addEventListener("mousemove",this.onMouseMove_.bind(this)),window.addEventListener("mousedown",this.onMouseDown_.bind(this)),window.addEventListener("mouseup",this.onMouseUp_.bind(this)),this.phi_=0,this.theta_=0,this.targetAngle_=null,
this.angleAnimation_=null,this.euler_=new n.Euler,this.orientation_=new n.Quaternion,this.rotateStart_=new n.Vector2,this.rotateEnd_=new n.Vector2,this.rotateDelta_=new n.Vector2,this.isDragging_=!1,this.orientationOut_=new Float32Array(4)}var r=t("./base.js").VRDisplay,n=t("./three-math.js"),a=t("./util.js"),o=.15,M=80,u=.5,A=.3;s.prototype=new r,s.prototype.getImmediatePose=function(){return this.euler_.set(this.phi_,this.theta_,0,"YXZ"),this.orientation_.setFromEuler(this.euler_),this.orientationOut_[0]=this.orientation_.x,this.orientationOut_[1]=this.orientation_.y,this.orientationOut_[2]=this.orientation_.z,this.orientationOut_[3]=this.orientation_.w,{position:null,orientation:this.orientationOut_,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},s.prototype.onKeyDown_=function(t){38==t.keyCode?this.animatePhi_(this.phi_+o):39==t.keyCode?this.animateTheta_(this.theta_-o):40==t.keyCode?this.animatePhi_(this.phi_-o):37==t.keyCode&&this.animateTheta_(this.theta_+o)},s.prototype.animateTheta_=function(t){this.animateKeyTransitions_("theta_",t)},s.prototype.animatePhi_=function(t){t=a.clamp(t,-Math.PI/2,Math.PI/2),this.animateKeyTransitions_("phi_",t)},s.prototype.animateKeyTransitions_=function(t,e){this.angleAnimation_&&clearInterval(this.angleAnimation_);var i=this[t],s=new Date;this.angleAnimation_=setInterval(function(){var r=new Date-s;if(r>=M)return this[t]=e,void clearInterval(this.angleAnimation_);var n=r/M;this[t]=i+(e-i)*n}.bind(this),1e3/60)},s.prototype.onMouseDown_=function(t){this.rotateStart_.set(t.clientX,t.clientY),this.isDragging_=!0},s.prototype.onMouseMove_=function(t){if(this.isDragging_||this.isPointerLocked_()){if(this.isPointerLocked_()){var e=t.movementX||t.mozMovementX||0,i=t.movementY||t.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-e,this.rotateStart_.y-i)}else this.rotateEnd_.set(t.clientX,t.clientY);this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_),this.rotateStart_.copy(this.rotateEnd_),this.phi_+=2*Math.PI*this.rotateDelta_.y/screen.height*A,this.theta_+=2*Math.PI*this.rotateDelta_.x/screen.width*u,this.phi_=a.clamp(this.phi_,-Math.PI/2,Math.PI/2)}},s.prototype.onMouseUp_=function(t){this.isDragging_=!1},s.prototype.isPointerLocked_=function(){var t=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement;return void 0!==t},s.prototype.resetPose=function(){this.phi_=0,this.theta_=0},e.exports=s},{"./base.js":2,"./three-math.js":20,"./util.js":22}],15:[function(t,e,i){function s(){this.loadIcon_();var t=document.createElement("div"),e=t.style;e.position="fixed",e.top=0,e.right=0,e.bottom=0,e.left=0,e.backgroundColor="gray",e.fontFamily="sans-serif";var i=document.createElement("img");i.src=this.icon;var e=i.style;e.marginLeft="25%",e.marginTop="25%",e.width="50%",t.appendChild(i);var s=document.createElement("div"),e=s.style;e.textAlign="center",e.fontSize="16px",e.lineHeight="24px",e.margin="24px 25%",e.width="50%",s.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(s);var r=document.createElement("div"),e=r.style;e.backgroundColor="#CFD8DC",e.position="fixed",e.bottom=0,e.width="100%",e.height="48px",e.padding="14px 24px",e.boxSizing="border-box",e.color="#656A6B",t.appendChild(r);var n=document.createElement("div");n.style["float"]="left",n.innerHTML="No Cardboard viewer?";var a=document.createElement("a");a.href="https://www.google.com/get/cardboard/get-cardboard/",a.innerHTML="get one";var e=a.style;e["float"]="right",e.fontWeight=600,e.textTransform="uppercase",e.borderLeft="1px solid gray",e.paddingLeft="24px",e.textDecoration="none",e.color="#656A6B",r.appendChild(n),r.appendChild(a),this.overlay=t,this.text=s,this.hide()}var r=t("./util.js");s.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var e=this.overlay.querySelector("img"),i=e.style;r.isLandscapeMode()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},s.prototype.hide=function(){this.overlay.style.display="none"},s.prototype.showTemporarily=function(t,e){this.show(e),this.timer=setTimeout(this.hide.bind(this),t)},s.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},s.prototype.update=function(){this.disableShowTemporarily(),!r.isLandscapeMode()&&r.isMobile()?this.show():this.hide()},s.prototype.loadIcon_=function(){this.icon=r.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+");
},e.exports=s},{"./util.js":22}],16:[function(t,e,i){function s(t){this.kFilter=t,this.currentAccelMeasurement=new r,this.currentGyroMeasurement=new r,this.previousGyroMeasurement=new r,this.filterQ=new n.Quaternion,this.previousFilterQ=new n.Quaternion,this.accelQ=new n.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new n.Vector3,this.measuredGravity=new n.Vector3,this.gyroIntegralQ=new n.Quaternion}var r=t("./sensor-sample.js"),n=t("../three-math.js"),a=t("../util.js"),o=!1;s.prototype.addAccelMeasurement=function(t,e){this.currentAccelMeasurement.set(t,e)},s.prototype.addGyroMeasurement=function(t,e){this.currentGyroMeasurement.set(t,e);var i=e-this.previousGyroMeasurement.timestampS;a.isTimestampDeltaValid(i)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},s.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,e=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(e),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(e);var i=new n.Quaternion;i.copy(this.filterQ),i.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(i),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var s=new n.Quaternion;s.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),s.inverse(),o&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",n.Math.radToDeg(a.getQuaternionAngle(s)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var r=new n.Quaternion;r.copy(this.filterQ),r.multiply(s),this.filterQ.slerp(r,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},s.prototype.getOrientation=function(){return this.filterQ},s.prototype.accelToQuaternion_=function(t){var e=new n.Vector3;e.copy(t),e.normalize();var i=new n.Quaternion;return i.setFromUnitVectors(new n.Vector3(0,0,-1),e),i.inverse(),i},s.prototype.gyroToQuaternionDelta_=function(t,e){var i=new n.Quaternion,s=new n.Vector3;return s.copy(t),s.normalize(),i.setFromAxisAngle(s,t.length()*e),i},e.exports=s},{"../three-math.js":20,"../util.js":22,"./sensor-sample.js":19}],17:[function(t,e,i){function s(){this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.accelerometer=new o.Vector3,this.gyroscope=new o.Vector3,window.addEventListener("devicemotion",this.onDeviceMotionChange_.bind(this)),window.addEventListener("orientationchange",this.onScreenOrientationChange_.bind(this)),this.filter=new r(WebVRConfig.K_FILTER||.98),this.posePredictor=new n(WebVRConfig.PREDICTION_TIME_S||.04),this.touchPanner=new a,this.filterToWorldQ=new o.Quaternion,M.isIOS()?this.filterToWorldQ.setFromAxisAngle(new o.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new o.Vector3(1,0,0),-Math.PI/2),this.worldToScreenQ=new o.Quaternion,this.setScreenTransform_(),this.resetQ=new o.Quaternion,this.isFirefoxAndroid=M.isFirefoxAndroid(),this.isIOS=M.isIOS(),this.orientationOut_=new Float32Array(4)}var r=t("./complementary-filter.js"),n=t("./pose-predictor.js"),a=t("../touch-panner.js"),o=t("../three-math.js"),M=t("../util.js");s.prototype.getPosition=function(){return null},s.prototype.getOrientation=function(){var t=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(t,this.gyroscope,this.previousTimestampS);var e=new o.Quaternion;return e.copy(this.filterToWorldQ),e.multiply(this.resetQ),WebVRConfig.TOUCH_PANNER_DISABLED||e.multiply(this.touchPanner.getOrientation()),e.multiply(this.predictedQ),e.multiply(this.worldToScreenQ),WebVRConfig.YAW_ONLY&&(e.x=0,e.z=0,e.normalize()),this.orientationOut_[0]=e.x,this.orientationOut_[1]=e.y,this.orientationOut_[2]=e.z,this.orientationOut_[3]=e.w,this.orientationOut_},s.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),WebVRConfig.TOUCH_PANNER_DISABLED||this.touchPanner.resetSensor()},s.prototype.onDeviceMotionChange_=function(t){var e=t.accelerationIncludingGravity,i=t.rotationRate,s=t.timeStamp/1e3;this.isFirefoxAndroid&&(s/=1e3);var r=s-this.previousTimestampS;return r<=M.MIN_TIMESTEP||r>M.MAX_TIMESTEP?void(this.previousTimestampS=s):(this.accelerometer.set(-e.x,-e.y,-e.z),this.gyroscope.set(i.alpha,i.beta,i.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,s),this.filter.addGyroMeasurement(this.gyroscope,s),void(this.previousTimestampS=s))},s.prototype.onScreenOrientationChange_=function(t){this.setScreenTransform_()},s.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new o.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new o.Vector3(0,0,1),Math.PI/2);break;case 180:}},e.exports=s},{"../three-math.js":20,"../touch-panner.js":21,"../util.js":22,"./complementary-filter.js":16,"./pose-predictor.js":18}],18:[function(t,e,i){function s(t){this.predictionTimeS=t,this.previousQ=new r.Quaternion,this.previousTimestampS=null,this.deltaQ=new r.Quaternion,this.outQ=new r.Quaternion}var r=t("../three-math.js"),n=!1;s.prototype.getPrediction=function(t,e,i){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=i,t;var s=new r.Vector3;s.copy(e),s.normalize();var a=e.length();if(a<r.Math.degToRad(20))return n&&console.log("Moving slowly, at %s deg/s: no prediction",r.Math.radToDeg(a).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var o=(i-this.previousTimestampS,a*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(s,o),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.outQ},e.exports=s},{"../three-math.js":20}],19:[function(t,e,i){function s(t,e){this.set(t,e)}s.prototype.set=function(t,e){this.sample=t,this.timestampS=e},s.prototype.copy=function(t){this.set(t.sample,t.timestampS)},e.exports=s},{}],20:[function(t,e,i){var s=window.THREE||{};s.Quaternion&&s.Vector3&&s.Vector2&&s.Euler&&s.Math||(console.log("No THREE.js found."),s.Quaternion=function(t,e,i,s){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==s?s:1},s.Quaternion.prototype={constructor:s.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._w=s,this.onChangeCallback(),this},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(t instanceof s.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var i=Math.cos(t._x/2),r=Math.cos(t._y/2),n=Math.cos(t._z/2),a=Math.sin(t._x/2),o=Math.sin(t._y/2),M=Math.sin(t._z/2);return"XYZ"===t.order?(this._x=a*r*n+i*o*M,this._y=i*o*n-a*r*M,this._z=i*r*M+a*o*n,this._w=i*r*n-a*o*M):"YXZ"===t.order?(this._x=a*r*n+i*o*M,this._y=i*o*n-a*r*M,this._z=i*r*M-a*o*n,this._w=i*r*n+a*o*M):"ZXY"===t.order?(this._x=a*r*n-i*o*M,this._y=i*o*n+a*r*M,this._z=i*r*M+a*o*n,this._w=i*r*n-a*o*M):"ZYX"===t.order?(this._x=a*r*n-i*o*M,this._y=i*o*n+a*r*M,this._z=i*r*M-a*o*n,this._w=i*r*n+a*o*M):"YZX"===t.order?(this._x=a*r*n+i*o*M,this._y=i*o*n+a*r*M,this._z=i*r*M-a*o*n,this._w=i*r*n-a*o*M):"XZY"===t.order&&(this._x=a*r*n-i*o*M,this._y=i*o*n-a*r*M,this._z=i*r*M+a*o*n,this._w=i*r*n+a*o*M),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,s=Math.sin(i);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,s=i[0],r=i[4],n=i[8],a=i[1],o=i[5],M=i[9],u=i[2],A=i[6],c=i[10],h=s+o+c;return h>0?(e=.5/Math.sqrt(h+1),this._w=.25/e,this._x=(A-M)*e,this._y=(n-u)*e,this._z=(a-r)*e):s>o&&s>c?(e=2*Math.sqrt(1+s-o-c),this._w=(A-M)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(n+u)/e):o>c?(e=2*Math.sqrt(1+o-s-c),this._w=(n-u)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(M+A)/e):(e=2*Math.sqrt(1+c-s-o),this._w=(a-r)/e,this._x=(n+u)/e,this._y=(M+A)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e,i=1e-6;return function(r,n){return void 0===t&&(t=new s.Vector3),e=r.dot(n)+1,i>e?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,n),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var i=t._x,s=t._y,r=t._z,n=t._w,a=e._x,o=e._y,M=e._z,u=e._w;return this._x=i*u+n*a+s*M-r*o,this._y=s*u+n*o+r*a-i*M,this._z=r*u+n*M+i*o-s*a,this._w=n*u-i*a-s*o-r*M,this.onChangeCallback(),this},multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,s=this._y,r=this._z,n=this._w,a=n*t._w+i*t._x+s*t._y+r*t._z;if(0>a?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=n,this._x=i,this._y=s,this._z=r,this;var o=Math.acos(a),M=Math.sqrt(1-a*a);if(Math.abs(M)<.001)return this._w=.5*(n+this._w),this._x=.5*(i+this._x),this._y=.5*(s+this._y),this._z=.5*(r+this._z),this;var u=Math.sin((1-e)*o)/M,A=Math.sin(e*o)/M;return this._w=n*u+this._w*A,this._x=i*u+this._x*A,this._y=s*u+this._y*A,this._z=r*u+this._z*A,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new s.Quaternion(this._x,this._y,this._z,this._w)}},s.Quaternion.slerp=function(t,e,i,s){return i.copy(t).slerp(e,s)},s.Vector2=function(t,e){this.x=t||0,this.y=e||0},s.Vector2.prototype={constructor:s.Vector2,set:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScalar:function(t){return this.x+=t,this.y+=t,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e}else this.x=0,this.y=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},clampScalar:function(){var t,e;return function(i,r){return void 0===t&&(t=new s.Vector2,e=new s.Vector2),t.set(i,i),e.set(r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,i){return void 0===i&&(i=0),e=e*t.itemSize+i,this.x=t.array[e],this.y=t.array[e+1],this},clone:function(){return new s.Vector2(this.x,this.y)}},s.Vector3=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0},s.Vector3.prototype={constructor:s.Vector3,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return e instanceof s.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new s.Quaternion),this.applyQuaternion(t.setFromEuler(e)),this}}(),applyAxisAngle:function(){var t;return function(e,i){return void 0===t&&(t=new s.Quaternion),this.applyQuaternion(t.setFromAxisAngle(e,i)),this}}(),applyMatrix3:function(t){var e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*s,this.y=r[1]*e+r[4]*i+r[7]*s,this.z=r[2]*e+r[5]*i+r[8]*s,this},applyMatrix4:function(t){var e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*s+r[12],this.y=r[1]*e+r[5]*i+r[9]*s+r[13],this.z=r[2]*e+r[6]*i+r[10]*s+r[14],this},applyProjection:function(t){var e=this.x,i=this.y,s=this.z,r=t.elements,n=1/(r[3]*e+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*s+r[12])*n,this.y=(r[1]*e+r[5]*i+r[9]*s+r[13])*n,this.z=(r[2]*e+r[6]*i+r[10]*s+r[14])*n,this},applyQuaternion:function(t){var e=this.x,i=this.y,s=this.z,r=t.x,n=t.y,a=t.z,o=t.w,M=o*e+n*s-a*i,u=o*i+a*e-r*s,A=o*s+r*i-n*e,c=-r*e-n*i-a*s;return this.x=M*o+c*-r+u*-a-A*-n,this.y=u*o+c*-n+A*-r-M*-a,this.z=A*o+c*-a+M*-n-u*-r,this},project:function(){var t;return function(e){return void 0===t&&(t=new s.Matrix4),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new s.Matrix4),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*s,this.y=r[1]*e+r[5]*i+r[9]*s,this.z=r[2]*e+r[6]*i+r[10]*s,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this},clampScalar:function(){var t,e;return function(i,r){return void 0===t&&(t=new s.Vector3,e=new s.Vector3),t.set(i,i,i),e.set(r,r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var i=this.x,s=this.y,r=this.z;return this.x=s*t.z-r*t.y,this.y=r*t.x-i*t.z,this.z=i*t.y-s*t.x,this},crossVectors:function(t,e){var i=t.x,s=t.y,r=t.z,n=e.x,a=e.y,o=e.z;return this.x=s*o-r*a,this.y=r*n-i*o,this.z=i*a-s*n,this},projectOnVector:function(){var t,e;return function(i){return void 0===t&&(t=new s.Vector3),t.copy(i).normalize(),e=this.dot(t),this.copy(t).multiplyScalar(e)}}(),projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new s.Vector3),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new s.Vector3),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/(this.length()*t.length());return Math.acos(s.Math.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return e*e+i*i+s*s},setEulerFromRotationMatrix:function(t,e){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(t,e){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},setFromMatrixPosition:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function(t){var e=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),i=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),s=this.set(t.elements[8],t.elements[9],t.elements[10]).length();return this.x=e,this.y=i,this.z=s,this},setFromMatrixColumn:function(t,e){var i=4*t,s=e.elements;return this.x=s[i],this.y=s[i+1],this.z=s[i+2],this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,i){return void 0===i&&(i=0),e=e*t.itemSize+i,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this},clone:function(){return new s.Vector3(this.x,this.y,this.z)}},s.Euler=function(t,e,i,r){this._x=t||0,this._y=e||0,this._z=i||0,this._order=r||s.Euler.DefaultOrder},s.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],s.Euler.DefaultOrder="XYZ",s.Euler.prototype={constructor:s.Euler,_x:0,_y:0,_z:0,_order:s.Euler.DefaultOrder,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._order=s||this._order,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var r=s.Math.clamp,n=t.elements,a=n[0],o=n[4],M=n[8],u=n[1],A=n[5],c=n[9],h=n[2],g=n[6],l=n[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(r(M,-1,1)),Math.abs(M)<.99999?(this._x=Math.atan2(-c,l),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(g,A),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(M,l),this._z=Math.atan2(u,A)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(g,-1,1)),Math.abs(g)<.99999?(this._y=Math.atan2(-h,l),this._z=Math.atan2(-o,A)):(this._y=0,this._z=Math.atan2(u,a))):"ZYX"===e?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(g,l),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,A))):"YZX"===e?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,A),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(M,l))):"XZY"===e?(this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(g,A),this._y=Math.atan2(M,a)):(this._x=Math.atan2(-c,l),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,i!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,i,r){return void 0===t&&(t=new s.Matrix4),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,i,r),this}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new s.Quaternion;return function(e){t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new s.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new s.Euler(this._x,this._y,this._z,this._order)}},s.Math={generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),s=0;return function(){for(var r=0;36>r;r++)8==r||13==r||18==r||23==r?i[r]="-":14==r?i[r]="4":(2>=s&&(s=33554432+16777216*Math.random()|0),t=15&s,s>>=4,i[r]=e[19==r?3&t|8:t]);return i.join("")}}(),clamp:function(t,e,i){return e>t?e:t>i?i:t},clampBottom:function(t,e){return e>t?e:t},mapLinear:function(t,e,i,s,r){return s+(t-e)*(r-s)/(i-e)},smoothstep:function(t,e,i){return e>=t?0:t>=i?1:(t=(t-e)/(i-e),t*t*(3-2*t))},smootherstep:function(t,e,i){return e>=t?0:t>=i?1:(t=(t-e)/(i-e),t*t*t*(t*(6*t-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(t,e){return Math.floor(this.randFloat(t,e))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(){var t=Math.PI/180;return function(e){return e*t}}(),radToDeg:function(){var t=180/Math.PI;return function(e){return e*t}}(),isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}}),e.exports=s},{}],21:[function(t,e,i){function s(){window.addEventListener("touchstart",this.onTouchStart_.bind(this)),window.addEventListener("touchmove",this.onTouchMove_.bind(this)),window.addEventListener("touchend",this.onTouchEnd_.bind(this)),this.isTouching=!1,this.rotateStart=new r.Vector2,this.rotateEnd=new r.Vector2,this.rotateDelta=new r.Vector2,this.theta=0,this.orientation=new r.Quaternion}var r=t("./three-math.js"),n=t("./util.js"),a=.5;s.prototype.getOrientation=function(){return this.orientation.setFromEuler(new r.Euler(0,0,this.theta)),this.orientation},s.prototype.resetSensor=function(){this.theta=0},s.prototype.onTouchStart_=function(t){1==t.touches.length&&(this.rotateStart.set(t.touches[0].pageX,t.touches[0].pageY),this.isTouching=!0)},s.prototype.onTouchMove_=function(t){if(this.isTouching){this.rotateEnd.set(t.touches[0].pageX,t.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),n.isIOS()&&(this.rotateDelta.x*=-1);var e=document.body;this.theta+=2*Math.PI*this.rotateDelta.x/e.clientWidth*a}},s.prototype.onTouchEnd_=function(t){this.isTouching=!1},e.exports=s},{"./three-math.js":20,"./util.js":22}],22:[function(t,e,i){var s=window.Util||{};s.MIN_TIMESTEP=95e-5,s.MAX_TIMESTEP=1,s.base64=function(t,e){return"data:"+t+";base64,"+e},s.clamp=function(t,e,i){return Math.min(Math.max(e,t),i)},s.lerp=function(t,e,i){return t+(e-t)*i},s.pingPong=function(t,e){0>t&&(t=-t);var i=Math.floor(t/e),s=t-e*i;return i%2?e-s:s},s.isIOS=function(){return/iPad|iPhone|iPod/.test(navigator.platform)},s.isFirefoxAndroid=function(){return-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android")},s.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},s.isTimestampDeltaValid=function(t){return isNaN(t)?!1:t<=s.MIN_TIMESTEP?!1:!(t>s.MAX_TIMESTEP)},s.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},s.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},s.requestFullscreen=function(t){if(t.requestFullscreen)t.requestFullscreen();else if(t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0},s.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},s.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},s.linkProgram=function(t,e,i,s){var r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,e),t.compileShader(r);var n=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(n,i),t.compileShader(n);var a=t.createProgram();t.attachShader(a,r),t.attachShader(a,n);for(var o in s)t.bindAttribLocation(a,s[o],o);return t.linkProgram(a),t.deleteShader(r),t.deleteShader(n),a},s.getProgramUniforms=function(t,e){for(var i={},s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r="",n=0;s>n;n++){var a=t.getActiveUniform(e,n);r=a.name.replace("[0]",""),i[r]=t.getUniformLocation(e,r)}return i},s.orthoMatrix=function(t,e,i,s,r,n,a){var o=1/(e-i),M=1/(s-r),u=1/(n-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*M,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*o,t[13]=(r+s)*M,t[14]=(a+n)*u,t[15]=1,t},s.isMobile=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0);
}(navigator.userAgent||navigator.vendor||window.opera),t},e.exports=s},{}],23:[function(t,e,i){function s(){try{this.selectedKey=localStorage.getItem(o)||a}catch(t){console.error("Failed to load viewer profile: %s",t)}this.dialog=this.createDialog_(n.Viewers),this.root=null}var r=t("./emitter.js"),n=(t("./util.js"),t("./device-info.js")),a="CardboardV1",o="WEBVR_CARDBOARD_VIEWER",M="webvr-polyfill-viewer-selector";s.prototype=new r,s.prototype.show=function(t){this.root=t,t.appendChild(this.dialog);var e=this.dialog.querySelector("#"+this.selectedKey);e.checked=!0,this.dialog.style.display="block"},s.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},s.prototype.getCurrentViewer=function(){return n.Viewers[this.selectedKey]},s.prototype.getSelectedKey_=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},s.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!n.Viewers[this.selectedKey])return void console.error("ViewerSelector.onSave_: this should never happen!");this.emit("change",n.Viewers[this.selectedKey]);try{localStorage.setItem(o,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()},s.prototype.createDialog_=function(t){var e=document.createElement("div");e.classList.add(M),e.style.display="none";var i=document.createElement("div"),s=i.style;s.position="fixed",s.left=0,s.top=0,s.width="100%",s.height="100%",s.background="rgba(0, 0, 0, 0.3)",i.addEventListener("click",this.hide.bind(this));var r=280,n=document.createElement("div"),s=n.style;s.boxSizing="border-box",s.position="fixed",s.top="24px",s.left="50%",s.marginLeft=-r/2+"px",s.width=r+"px",s.padding="24px",s.overflow="hidden",s.background="#fafafa",s.fontFamily="'Roboto', sans-serif",s.boxShadow="0px 5px 20px #666",n.appendChild(this.createH1_("Select your viewer"));for(var a in t)n.appendChild(this.createChoice_(a,t[a].label));return n.appendChild(this.createButton_("Save",this.onSave_.bind(this))),e.appendChild(i),e.appendChild(n),e},s.prototype.createH1_=function(t){var e=document.createElement("h1"),i=e.style;return i.color="black",i.fontSize="20px",i.fontWeight="bold",i.marginTop=0,i.marginBottom="24px",e.innerHTML=t,e},s.prototype.createChoice_=function(t,e){var i=document.createElement("div");i.style.marginTop="8px",i.style.color="black";var s=document.createElement("input");s.style.fontSize="30px",s.setAttribute("id",t),s.setAttribute("type","radio"),s.setAttribute("value",t),s.setAttribute("name","field");var r=document.createElement("label");return r.style.marginLeft="4px",r.setAttribute("for",t),r.innerHTML=e,i.appendChild(s),i.appendChild(r),i},s.prototype.createButton_=function(t,e){var i=document.createElement("button");i.innerHTML=t;var s=i.style;return s["float"]="right",s.textTransform="uppercase",s.color="#1094f7",s.fontSize="14px",s.letterSpacing=0,s.border=0,s.background="none",s.marginTop="16px",i.addEventListener("click",e),i},e.exports=s},{"./device-info.js":7,"./emitter.js":12,"./util.js":22}],24:[function(t,e,i){function s(){var t=document.createElement("video");t.addEventListener("ended",function(){t.play()}),this.request=function(){t.paused&&(t.src=a.base64("video/mp4","AAAAGGZ0eXBpc29tAAAAAG1wNDFhdmMxAAAIA21vb3YAAABsbXZoZAAAAADSa9v60mvb+gABX5AAlw/gAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAdkdHJhawAAAFx0a2hkAAAAAdJr2/rSa9v6AAAAAQAAAAAAlw/gAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAQAAAAHAAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAJcP4AAAAAAAAQAAAAAG3G1kaWEAAAAgbWRoZAAAAADSa9v60mvb+gAPQkAGjneAFccAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAABodtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAZHc3RibAAAAJdzdHNkAAAAAAAAAAEAAACHYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAMABwASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADFhdmNDAWQAC//hABlnZAALrNlfllw4QAAAAwBAAAADAKPFCmWAAQAFaOvssiwAAAAYc3R0cwAAAAAAAAABAAAAbgAPQkAAAAAUc3RzcwAAAAAAAAABAAAAAQAAA4BjdHRzAAAAAAAAAG4AAAABAD0JAAAAAAEAehIAAAAAAQA9CQAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEALcbAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAABuAAAAAQAAAcxzdHN6AAAAAAAAAAAAAABuAAADCQAAABgAAAAOAAAADgAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABMAAAAUc3RjbwAAAAAAAAABAAAIKwAAACt1ZHRhAAAAI6llbmMAFwAAdmxjIDIuMi4xIHN0cmVhbSBvdXRwdXQAAAAId2lkZQAACRRtZGF0AAACrgX//6vcRem95tlIt5Ys2CDZI+7veDI2NCAtIGNvcmUgMTQyIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDEzIG1lPWhleCBzdWJtZT03IHBzeT0xIHBzeV9yZD0xLjAwOjAuMDAgbWl4ZWRfcmVmPTEgbWVfcmFuZ2U9MTYgY2hyb21hX21lPTEgdHJlbGxpcz0xIDh4OGRjdD0xIGNxbT0wIGRlYWR6b25lPTIxLDExIGZhc3RfcHNraXA9MSBjaHJvbWFfcXBfb2Zmc2V0PS0yIHRocmVhZHM9MTIgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1hYnIgbWJ0cmVlPTEgYml0cmF0ZT0xMDAgcmF0ZXRvbD0xLjAgcWNvbXA9MC42MCBxcG1pbj0xMCBxcG1heD01MSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAU2WIhAAQ/8ltlOe+cTZuGkKg+aRtuivcDZ0pBsfsEi9p/i1yU9DxS2lq4dXTinViF1URBKXgnzKBd/Uh1bkhHtMrwrRcOJslD01UB+fyaL6ef+DBAAAAFEGaJGxBD5B+v+a+4QqF3MgBXz9MAAAACkGeQniH/+94r6EAAAAKAZ5hdEN/8QytwAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFomUwIIf/+4QAAAApBnoZFESw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAOQZrwSahBbJlMCCH//uEAAAAKQZ8ORRUsP/++gQAAAAgBny10Q3/EgQAAAAgBny9qQ3/EgAAAAA5BmzRJqEFsmUwIIf/+4AAAAApBn1JFFSw//76BAAAACAGfcXRDf8SAAAAACAGfc2pDf8SAAAAADkGbeEmoQWyZTAgh//7hAAAACkGflkUVLD//voAAAAAIAZ+1dEN/xIEAAAAIAZ+3akN/xIEAAAAOQZu8SahBbJlMCCH//uAAAAAKQZ/aRRUsP/++gQAAAAgBn/l0Q3/EgAAAAAgBn/tqQ3/EgQAAAA5Bm+BJqEFsmUwIIf/+4QAAAApBnh5FFSw//76AAAAACAGePXRDf8SAAAAACAGeP2pDf8SBAAAADkGaJEmoQWyZTAgh//7gAAAACkGeQkUVLD//voEAAAAIAZ5hdEN/xIAAAAAIAZ5jakN/xIEAAAAOQZpoSahBbJlMCCH//uEAAAAKQZ6GRRUsP/++gQAAAAgBnqV0Q3/EgQAAAAgBnqdqQ3/EgAAAAA5BmqxJqEFsmUwIIf/+4AAAAApBnspFFSw//76BAAAACAGe6XRDf8SAAAAACAGe62pDf8SAAAAADkGa8EmoQWyZTAgh//7hAAAACkGfDkUVLD//voEAAAAIAZ8tdEN/xIEAAAAIAZ8vakN/xIAAAAAOQZs0SahBbJlMCCH//uAAAAAKQZ9SRRUsP/++gQAAAAgBn3F0Q3/EgAAAAAgBn3NqQ3/EgAAAAA5Bm3hJqEFsmUwIIf/+4QAAAApBn5ZFFSw//76AAAAACAGftXRDf8SBAAAACAGft2pDf8SBAAAADkGbvEmoQWyZTAgh//7gAAAACkGf2kUVLD//voEAAAAIAZ/5dEN/xIAAAAAIAZ/7akN/xIEAAAAOQZvgSahBbJlMCCH//uEAAAAKQZ4eRRUsP/++gAAAAAgBnj10Q3/EgAAAAAgBnj9qQ3/EgQAAAA5BmiRJqEFsmUwIIf/+4AAAAApBnkJFFSw//76BAAAACAGeYXRDf8SAAAAACAGeY2pDf8SBAAAADkGaaEmoQWyZTAgh//7hAAAACkGehkUVLD//voEAAAAIAZ6ldEN/xIEAAAAIAZ6nakN/xIAAAAAOQZqsSahBbJlMCCH//uAAAAAKQZ7KRRUsP/++gQAAAAgBnul0Q3/EgAAAAAgBnutqQ3/EgAAAAA5BmvBJqEFsmUwIIf/+4QAAAApBnw5FFSw//76BAAAACAGfLXRDf8SBAAAACAGfL2pDf8SAAAAADkGbNEmoQWyZTAgh//7gAAAACkGfUkUVLD//voEAAAAIAZ9xdEN/xIAAAAAIAZ9zakN/xIAAAAAOQZt4SahBbJlMCCH//uEAAAAKQZ+WRRUsP/++gAAAAAgBn7V0Q3/EgQAAAAgBn7dqQ3/EgQAAAA5Bm7xJqEFsmUwIIf/+4AAAAApBn9pFFSw//76BAAAACAGf+XRDf8SAAAAACAGf+2pDf8SBAAAADkGb4EmoQWyZTAgh//7hAAAACkGeHkUVLD//voAAAAAIAZ49dEN/xIAAAAAIAZ4/akN/xIEAAAAOQZokSahBbJlMCCH//uAAAAAKQZ5CRRUsP/++gQAAAAgBnmF0Q3/EgAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFsmUwIIf/+4QAAAApBnoZFFSw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAPQZruSahBbJlMFEw3//7B"),t.play())},this.release=function(){t.pause(),t.src=""}}function r(){var t=null;this.request=function(){t||(t=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){t&&(clearInterval(t),t=null)}}function n(){var t=navigator.userAgent||navigator.vendor||window.opera;return t.match(/iPhone/i)||t.match(/iPod/i)?r:s}var a=t("./util.js");e.exports=n()},{"./util.js":22}],25:[function(t,e,i){function s(){this.displays=[],this.devices=[],this.devicesPopulated=!1,this.nativeWebVRAvailable=this.isWebVRAvailable(),this.nativeLegacyWebVRAvailable=this.isDeprecatedWebVRAvailable(),this.nativeLegacyWebVRAvailable||(this.nativeWebVRAvailable||this.enablePolyfill(),WebVRConfig.ENABLE_DEPRECATED_API&&this.enableDeprecatedPolyfill())}t("es6-promise").polyfill();var r=t("./cardboard-vr-display.js"),n=t("./mouse-keyboard-vr-display.js"),a=t("./base.js").VRDisplay,o=t("./base.js").HMDVRDevice,M=t("./base.js").PositionSensorVRDevice,u=t("./display-wrappers.js").VRDisplayHMDDevice,A=t("./display-wrappers.js").VRDisplayPositionSensorDevice;s.prototype.isWebVRAvailable=function(){return"getVRDisplays"in navigator},s.prototype.isDeprecatedWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator},s.prototype.populateDevices=function(){if(!this.devicesPopulated){var t=null;this.isCardboardCompatible()&&(t=new r,this.displays.push(t),WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new u(t)),this.devices.push(new A(t)))),this.isMobile()||WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED||(t=new n,this.displays.push(t),WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new u(t)),this.devices.push(new A(t)))),this.devicesPopulated=!0}},s.prototype.enablePolyfill=function(){navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=a},s.prototype.enableDeprecatedPolyfill=function(){navigator.getVRDevices=this.getVRDevices.bind(this),window.HMDVRDevice=o,window.PositionSensorVRDevice=M},s.prototype.getVRDisplays=function(){this.populateDevices();var t=this.displays;return new Promise(function(e,i){try{e(t)}catch(s){i(s)}})},s.prototype.getVRDevices=function(){console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");var t=this;return new Promise(function(e,i){try{if(!t.devicesPopulated){if(t.nativeWebVRAvailable)return navigator.getVRDisplays(function(i){for(var s=0;s<i.length;++s)t.devices.push(new u(i[s])),t.devices.push(new A(i[s]));t.devicesPopulated=!0,e(t.devices)},i);if(t.nativeLegacyWebVRAvailable)return(navigator.getVRDDevices||navigator.mozGetVRDevices)(function(i){for(var s=0;s<i.length;++s)i[s]instanceof o&&t.devices.push(displays[s]),i[s]instanceof M&&t.devices.push(i[s]);t.devicesPopulated=!0,e(t.devices)},i)}t.populateDevices(),e(t.devices)}catch(s){i(s)}})},s.prototype.isMobile=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},s.prototype.isCardboardCompatible=function(){return this.isMobile()||WebVRConfig.FORCE_ENABLE_VR},e.exports=s},{"./base.js":2,"./cardboard-vr-display.js":5,"./display-wrappers.js":8,"./mouse-keyboard-vr-display.js":14,"es6-promise":1}],26:[function(t,e,i){function s(){A=!1,o.length?u=o.concat(u):c=-1,u.length&&r()}function r(){if(!A){var t=setTimeout(s);A=!0;for(var e=u.length;e;){for(o=u,u=[];++c<e;)o&&o[c].run();c=-1,e=u.length}o=null,A=!1,clearTimeout(t)}}function n(t,e){this.fun=t,this.array=e}function a(){}var o,M=e.exports={},u=[],A=!1,c=-1;M.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new n(t,e)),1!==u.length||A||setTimeout(r,0)},n.prototype.run=function(){this.fun.apply(null,this.array)},M.title="browser",M.browser=!0,M.env={},M.argv=[],M.version="",M.versions={},M.on=a,M.addListener=a,M.once=a,M.off=a,M.removeListener=a,M.removeAllListeners=a,M.emit=a,M.binding=function(t){throw new Error("process.binding is not supported")},M.cwd=function(){return"/"},M.chdir=function(t){throw new Error("process.chdir is not supported")},M.umask=function(){return 0}},{}]},{},[13]);